<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Time Management Functions</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="μT-Kernel 3.0 Specification"
HREF="index.html"><LINK
REL="UP"
TITLE="μT-Kernel/OS Functions"
HREF="utk_os_functions.html"><LINK
REL="PREVIOUS"
TITLE="Memory Pool Management Functions"
HREF="memory_pool_management_functions.html"><LINK
REL="NEXT"
TITLE="Interrupt Management Functions"
HREF="interrupt_management_functions_os.html"></HEAD
><BODY
CLASS="section"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>μT-Kernel 3.0 Specification</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="memory_pool_management_functions.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>μT-Kernel/OS Functions</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="interrupt_management_functions_os.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="section"
><H1
CLASS="section"
><A
NAME="time_management_functions"
>Time Management Functions</A
></H1
><P
>Time management functions perform time-dependent processing. They include functions for system time management, cyclic handlers, and alarm handlers.</P
><P
>The generic name used in the following for cyclic handlers and alarm handlers is time event handlers.</P
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="system_time_management"
>System Time Management</A
></H2
><P
>System time is the time which a system that runs μT-Kernel uses as timing reference for its operation. Functions are provided for system clock setting and reference, and for referencing system operating time.</P
><P
>System time of μT-Kernel 3.0 starts from the epoch, January 1st 1970, 0:00:00 (UTC). It is represented either in the elapsed milliseconds or in microseconds. System time is set using <A
HREF="time_management_functions.html#tk_set_utc"
>tk_set_utc</A
> or <A
HREF="time_management_functions.html#tk_set_utc_u"
>tk_set_utc_u</A
>. It can be referenced by <A
HREF="time_management_functions.html#tk_get_utc"
>tk_get_utc</A
> or <A
HREF="time_management_functions.html#tk_get_utc_u"
>tk_get_utc_u</A
>.</P
><DIV
CLASS="note"
><P
></P
><TABLE
CLASS="note"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.gif"
HSPACE="5"
ALT="Note"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Additional Notes</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>System time epoch in μT-Kernel 3.0 is 0:00:00, January 1, 1970 (UTC). The epoch, 0:00:00, January 1, 1970 (UTC), is the same epoch used by UNIX operating systems that conform to the POSIX standard.</P
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="tk_set_utc"
>tk_set_utc - Set System Time</A
></H3
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN13646"
>C Language Interface</A
></H4
><DIV
CLASS="funcsynopsis"
><P
></P
><A
NAME="AEN13648"
></A
><PRE
CLASS="funcsynopsisinfo"
>#include &#60;tk/tkernel.h&#62;</PRE
><P
><CODE
><CODE
CLASS="FUNCDEF"
>ER ercd = tk_set_utc</CODE
>(CONST SYSTIM *pk_tim);</CODE
></P
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN13655"
>Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN13657"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="23%"><COL
WIDTH="15%"><COL
WIDTH="31%"><COL
WIDTH="31%"><TBODY
VALIGN="top"
><TR
><TD
>CONST SYSTIM*</TD
><TD
>&#13;                <CODE
CLASS="varname"
>pk_tim</CODE
>
              </TD
><TD
>Packet of Current Time</TD
><TD
>Packet indicating current time (ms)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
><P
><CODE
CLASS="varname"
>pk_tim</CODE
> Detail:</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN13672"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="23%"
TITLE="c1"><COL
WIDTH="15%"
TITLE="c2"><COL
WIDTH="31%"
TITLE="c3"><COL
WIDTH="31%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>W</TD
><TD
>&#13;                <CODE
CLASS="varname"
>hi</CODE
>
              </TD
><TD
>High 32 bits</TD
><TD
>Higher 32 bits of current time for setting the system time</TD
></TR
><TR
><TD
>UW</TD
><TD
>&#13;                <CODE
CLASS="varname"
>lo</CODE
>
              </TD
><TD
>Low 32 bits</TD
><TD
>Lower 32 bits of current time for setting the system time</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN13691"
>Return Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN13693"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="23%"
TITLE="c1"><COL
WIDTH="15%"
TITLE="c2"><COL
WIDTH="31%"
TITLE="c3"><COL
WIDTH="31%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>ER</TD
><TD
>&#13;                <CODE
CLASS="varname"
>ercd</CODE
>
              </TD
><TD
>Error Code</TD
><TD
>Error code</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN13706"
>Error Code</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN13708"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="17%"
TITLE="c1"><COL
WIDTH="83%"
TITLE="c2"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_OK</SPAN
>
              </TD
><TD
>Normal completion</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_PAR</SPAN
>
              </TD
><TD
>Parameter error (<CODE
CLASS="varname"
>pk_tim</CODE
> is invalid, or time setting is invalid)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN13722"
>Valid Context</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN13724"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="33%"><COL
WIDTH="33%"><COL
WIDTH="33%"><THEAD
><TR
><TH
ALIGN="center"
>Task portion</TH
><TH
ALIGN="center"
>Quasi-task portion</TH
><TH
ALIGN="center"
>Task-independent portion</TH
></TR
></THEAD
><TBODY
VALIGN="top"
><TR
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>NO</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN13739"
>Related Service Profile Items</A
></H4
><P
>Only when all the service profile items below are set to be effective, this system call can be used.</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN13742"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="38%"
TITLE="c1"><COL
WIDTH="62%"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <TT
CLASS="literal"
>TK_SUPPORT_UTC</TT
>
              </TD
><TD
>Support of UNIX time</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN13751"
>Description</A
></H4
><P
>Sets the system clock to the value specified in <CODE
CLASS="varname"
>pk_tim</CODE
>.</P
><P
>System time is expressed as cumulative milliseconds from 0:00:00, January 1, 1970 (UTC).</P
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN13756"
>Additional Notes</A
></H4
><P
>The relative time specified in RELTIM or TMO does not change even if the system clock is changed by calling <A
HREF="time_management_functions.html#tk_set_utc"
>tk_set_utc</A
> during system operation. For example, if a timeout is set to elapse in 60 seconds and the system clock is advanced by 60 seconds by <A
HREF="time_management_functions.html#tk_set_utc"
>tk_set_utc</A
> while waiting for the timeout, the timeout occurs not immediately but 60 seconds after it was set. Instead, <A
HREF="time_management_functions.html#tk_set_utc"
>tk_set_utc</A
> changes the system time at which the timeout occurs.</P
><P
>The time specified in <CODE
CLASS="varname"
>pk_tim</CODE
> for <A
HREF="time_management_functions.html#tk_set_utc"
>tk_set_utc</A
> is not restricted to the resolution of the timer interrupt cycle. But the time that is read later by <A
HREF="time_management_functions.html#tk_get_utc"
>tk_get_utc</A
> changes according to the time resolution of the timer interrupt cycle. For example, in the system where the timer interrupt cycle is 10 milliseconds, if the time of 10005 (ms) is specified in <A
HREF="time_management_functions.html#tk_set_utc"
>tk_set_utc</A
>, then the time obtained later by <A
HREF="time_management_functions.html#tk_get_utc"
>tk_get_utc</A
> changes as follows: 10005 (ms) → 10015 (ms) → 10025 (ms).</P
></DIV
></DIV
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="tk_set_utc_u"
>tk_set_utc_u - Set Time (Microseconds)</A
></H3
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN13770"
>C Language Interface</A
></H4
><DIV
CLASS="funcsynopsis"
><P
></P
><A
NAME="AEN13772"
></A
><PRE
CLASS="funcsynopsisinfo"
>#include &#60;tk/tkernel.h&#62;</PRE
><P
><CODE
><CODE
CLASS="FUNCDEF"
>ER ercd = tk_set_utc_u</CODE
>(SYSTIM_U tim_u);</CODE
></P
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN13779"
>Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN13781"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="15%"><COL
WIDTH="15%"><COL
WIDTH="31%"><COL
WIDTH="38%"><TBODY
VALIGN="top"
><TR
><TD
>SYSTIM_U</TD
><TD
>&#13;                <CODE
CLASS="varname"
>tim_u</CODE
>
              </TD
><TD
>Current Time</TD
><TD
>Current time (in microseconds)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN13794"
>Return Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN13796"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="15%"
TITLE="c1"><COL
WIDTH="15%"
TITLE="c2"><COL
WIDTH="31%"
TITLE="c3"><COL
WIDTH="38%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>ER</TD
><TD
>&#13;                <CODE
CLASS="varname"
>ercd</CODE
>
              </TD
><TD
>Error Code</TD
><TD
>Error code</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN13809"
>Error Code</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN13811"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="17%"
TITLE="c1"><COL
WIDTH="83%"
TITLE="c2"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_OK</SPAN
>
              </TD
><TD
>Normal completion</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_PAR</SPAN
>
              </TD
><TD
>Parameter error (<CODE
CLASS="varname"
>tim_u</CODE
> is invalid, or time setting is invalid)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN13825"
>Valid Context</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN13827"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="33%"><COL
WIDTH="33%"><COL
WIDTH="33%"><THEAD
><TR
><TH
ALIGN="center"
>Task portion</TH
><TH
ALIGN="center"
>Quasi-task portion</TH
><TH
ALIGN="center"
>Task-independent portion</TH
></TR
></THEAD
><TBODY
VALIGN="top"
><TR
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>NO</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN13842"
>Related Service Profile Items</A
></H4
><P
>Only when all the service profile items below are set to be effective, this system call can be used.</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN13845"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="38%"
TITLE="c1"><COL
WIDTH="62%"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <TT
CLASS="literal"
>TK_SUPPORT_UTC</TT
>
              </TD
><TD
>Support of UNIX time</TD
></TR
><TR
><TD
>&#13;                <TT
CLASS="literal"
>TK_SUPPORT_USEC</TT
>
              </TD
><TD
>Support of microsecond</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN13858"
>Description</A
></H4
><P
>This system call takes 64-bit <CODE
CLASS="varname"
>tim_u</CODE
> in microseconds instead of the parameter <CODE
CLASS="varname"
>pk_tim</CODE
> of <A
HREF="time_management_functions.html#tk_set_utc"
>tk_set_utc</A
>. In the parameter <CODE
CLASS="varname"
>tim_u</CODE
> of this API, system time is expressed as cumulative microseconds from 0:00:00, January 1, 1970 (UTC).</P
><P
>Whereas the parameter <CODE
CLASS="varname"
>pk_tim</CODE
> of <A
HREF="time_management_functions.html#tk_set_utc"
>tk_set_utc</A
> is passed in packet using the structure SYSTIM, the parameter <CODE
CLASS="varname"
>tim_u</CODE
> of <A
HREF="time_management_functions.html#tk_set_utc_u"
>tk_set_utc_u</A
> is passed by value (not packet) using the 64-bit signed integer SYSTIM_U.</P
><P
>The specification of this system call is same as that of <A
HREF="time_management_functions.html#tk_set_utc"
>tk_set_utc</A
>, except the above-mentioned point. For more details, see the description of <A
HREF="time_management_functions.html#tk_set_utc"
>tk_set_utc</A
>.</P
></DIV
></DIV
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="tk_set_tim"
>tk_set_tim - Set System Time (TRON)</A
></H3
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN13875"
>C Language Interface</A
></H4
><DIV
CLASS="funcsynopsis"
><P
></P
><A
NAME="AEN13877"
></A
><PRE
CLASS="funcsynopsisinfo"
>#include &#60;tk/tkernel.h&#62;</PRE
><P
><CODE
><CODE
CLASS="FUNCDEF"
>ER ercd = tk_set_tim</CODE
>(CONST SYSTIM *pk_tim);</CODE
></P
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN13884"
>Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN13886"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="23%"><COL
WIDTH="15%"><COL
WIDTH="31%"><COL
WIDTH="31%"><TBODY
VALIGN="top"
><TR
><TD
>CONST SYSTIM*</TD
><TD
>&#13;                <CODE
CLASS="varname"
>pk_tim</CODE
>
              </TD
><TD
>Packet of Current Time</TD
><TD
>Packet indicating current time (ms)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
><P
><CODE
CLASS="varname"
>pk_tim</CODE
> Detail:</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN13901"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="23%"
TITLE="c1"><COL
WIDTH="15%"
TITLE="c2"><COL
WIDTH="31%"
TITLE="c3"><COL
WIDTH="31%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>W</TD
><TD
>&#13;                <CODE
CLASS="varname"
>hi</CODE
>
              </TD
><TD
>High 32 bits</TD
><TD
>Higher 32 bits of current time for setting the system time</TD
></TR
><TR
><TD
>UW</TD
><TD
>&#13;                <CODE
CLASS="varname"
>lo</CODE
>
              </TD
><TD
>Low 32 bits</TD
><TD
>Lower 32 bits of current time for setting the system time</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN13920"
>Return Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN13922"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="23%"
TITLE="c1"><COL
WIDTH="15%"
TITLE="c2"><COL
WIDTH="31%"
TITLE="c3"><COL
WIDTH="31%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>ER</TD
><TD
>&#13;                <CODE
CLASS="varname"
>ercd</CODE
>
              </TD
><TD
>Error Code</TD
><TD
>Error code</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN13935"
>Error Code</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN13937"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="17%"
TITLE="c1"><COL
WIDTH="83%"
TITLE="c2"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_OK</SPAN
>
              </TD
><TD
>Normal completion</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_PAR</SPAN
>
              </TD
><TD
>Parameter error (<CODE
CLASS="varname"
>pk_tim</CODE
> is invalid, or time setting is invalid)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN13951"
>Valid Context</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN13953"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="33%"><COL
WIDTH="33%"><COL
WIDTH="33%"><THEAD
><TR
><TH
ALIGN="center"
>Task portion</TH
><TH
ALIGN="center"
>Quasi-task portion</TH
><TH
ALIGN="center"
>Task-independent portion</TH
></TR
></THEAD
><TBODY
VALIGN="top"
><TR
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>NO</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN13968"
>Related Service Profile Items</A
></H4
><P
>Only when all the service profile items below are set to be effective, this system call can be used.</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN13971"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="38%"
TITLE="c1"><COL
WIDTH="62%"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <TT
CLASS="literal"
>TK_SUPPORT_TRONTIME</TT
>
              </TD
><TD
>Support of TRON time</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN13980"
>Description</A
></H4
><P
>Sets the system clock to the value specified in <CODE
CLASS="varname"
>pk_tim</CODE
>. In the parameter <CODE
CLASS="varname"
>hi</CODE
> and <CODE
CLASS="varname"
>lo</CODE
> of this API, system time is expressed as cumulative milliseconds from 0:00:00 (GMT), January 1, 1985.</P
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN13986"
>Additional Notes</A
></H4
><P
><A
HREF="time_management_functions.html#tk_set_tim"
>tk_set_tim</A
> is very similar to <A
HREF="time_management_functions.html#tk_set_utc"
>tk_set_utc</A
>. However, it uses the time system with a different epoch. <A
HREF="time_management_functions.html#tk_set_tim"
>tk_set_tim</A
> is an API to keep compatibility with legacy μT-Kernel or T-Kernel specifications.</P
></DIV
></DIV
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="tk_set_tim_u"
>tk_set_tim_u - Set Time (TRON, Microseconds)</A
></H3
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN13994"
>C Language Interface</A
></H4
><DIV
CLASS="funcsynopsis"
><P
></P
><A
NAME="AEN13996"
></A
><PRE
CLASS="funcsynopsisinfo"
>#include &#60;tk/tkernel.h&#62;</PRE
><P
><CODE
><CODE
CLASS="FUNCDEF"
>ER ercd = tk_set_tim_u</CODE
>(SYSTIM_U tim_u);</CODE
></P
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14003"
>Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14005"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="15%"><COL
WIDTH="15%"><COL
WIDTH="31%"><COL
WIDTH="38%"><TBODY
VALIGN="top"
><TR
><TD
>SYSTIM_U</TD
><TD
>&#13;                <CODE
CLASS="varname"
>tim_u</CODE
>
              </TD
><TD
>Current Time</TD
><TD
>Current time (in microseconds)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14018"
>Return Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14020"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="15%"
TITLE="c1"><COL
WIDTH="15%"
TITLE="c2"><COL
WIDTH="31%"
TITLE="c3"><COL
WIDTH="38%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>ER</TD
><TD
>&#13;                <CODE
CLASS="varname"
>ercd</CODE
>
              </TD
><TD
>Error Code</TD
><TD
>Error code</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14033"
>Error Code</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14035"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="17%"
TITLE="c1"><COL
WIDTH="83%"
TITLE="c2"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_OK</SPAN
>
              </TD
><TD
>Normal completion</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_PAR</SPAN
>
              </TD
><TD
>Parameter error (<CODE
CLASS="varname"
>tim_u</CODE
> is invalid, or time setting is invalid)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14049"
>Valid Context</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14051"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="33%"><COL
WIDTH="33%"><COL
WIDTH="33%"><THEAD
><TR
><TH
ALIGN="center"
>Task portion</TH
><TH
ALIGN="center"
>Quasi-task portion</TH
><TH
ALIGN="center"
>Task-independent portion</TH
></TR
></THEAD
><TBODY
VALIGN="top"
><TR
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>NO</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14066"
>Related Service Profile Items</A
></H4
><P
>Only when all the service profile items below are set to be effective, this system call can be used.</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14069"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="38%"
TITLE="c1"><COL
WIDTH="62%"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <TT
CLASS="literal"
>TK_SUPPORT_TRONTIME</TT
>
              </TD
><TD
>Support of TRON time</TD
></TR
><TR
><TD
>&#13;                <TT
CLASS="literal"
>TK_SUPPORT_USEC</TT
>
              </TD
><TD
>Support of microsecond</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14082"
>Description</A
></H4
><P
>This system call takes 64-bit <CODE
CLASS="varname"
>tim_u</CODE
> in microseconds instead of the parameter <CODE
CLASS="varname"
>pk_tim</CODE
> of <A
HREF="time_management_functions.html#tk_set_tim"
>tk_set_tim</A
>. In the parameter <CODE
CLASS="varname"
>tim_u</CODE
> of this API, system time is expressed as cumulative microseconds from 0:00:00 (GMT), January 1, 1985.</P
><P
>Whereas the parameter <CODE
CLASS="varname"
>pk_tim</CODE
> of <A
HREF="time_management_functions.html#tk_set_tim"
>tk_set_tim</A
> is passed in packet using the structure SYSTIM, the parameter <CODE
CLASS="varname"
>tim_u</CODE
> of <A
HREF="time_management_functions.html#tk_set_tim_u"
>tk_set_tim_u</A
> is passed by value (not packet) using the 64-bit signed integer SYSTIM_U.</P
><P
>The specification of this system call is same as that of <A
HREF="time_management_functions.html#tk_set_tim"
>tk_set_tim</A
>, except the above-mentioned point. For more details, see the description of <A
HREF="time_management_functions.html#tk_set_tim"
>tk_set_tim</A
>.</P
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14097"
>Additional Notes</A
></H4
><P
><A
HREF="time_management_functions.html#tk_set_tim_u"
>tk_set_tim_u</A
> is very similar to <A
HREF="time_management_functions.html#tk_set_utc_u"
>tk_set_utc_u</A
>. However, it uses the time system with a different epoch. <A
HREF="time_management_functions.html#tk_set_tim_u"
>tk_set_tim_u</A
> is an API to keep compatibility with legacy μT-Kernel or T-Kernel specifications.</P
></DIV
></DIV
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="tk_get_utc"
>tk_get_utc - Get System Time</A
></H3
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14105"
>C Language Interface</A
></H4
><DIV
CLASS="funcsynopsis"
><P
></P
><A
NAME="AEN14107"
></A
><PRE
CLASS="funcsynopsisinfo"
>#include &#60;tk/tkernel.h&#62;</PRE
><P
><CODE
><CODE
CLASS="FUNCDEF"
>ER ercd = tk_get_utc</CODE
>(SYSTIM *pk_tim);</CODE
></P
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14114"
>Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14116"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="8%"
TITLE="c1"><COL
WIDTH="17%"
TITLE="c2"><COL
WIDTH="33%"
TITLE="c3"><COL
WIDTH="42%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>SYSTIM*</TD
><TD
>&#13;                <CODE
CLASS="varname"
>pk_tim</CODE
>
              </TD
><TD
>Packet of Current Time</TD
><TD
>Pointer to the area to return the current time (ms)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14129"
>Return Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14131"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="8%"><COL
WIDTH="17%"><COL
WIDTH="33%"><COL
WIDTH="42%"><TBODY
VALIGN="top"
><TR
><TD
>ER</TD
><TD
>&#13;                <CODE
CLASS="varname"
>ercd</CODE
>
              </TD
><TD
>Error Code</TD
><TD
>Error code</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
><P
><CODE
CLASS="varname"
>pk_tim</CODE
> Detail:</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14146"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="8%"
TITLE="c1"><COL
WIDTH="17%"
TITLE="c2"><COL
WIDTH="33%"
TITLE="c3"><COL
WIDTH="42%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>W</TD
><TD
>&#13;                <CODE
CLASS="varname"
>hi</CODE
>
              </TD
><TD
>High 32 bits</TD
><TD
>Higher 32 bits of current time of the system time</TD
></TR
><TR
><TD
>UW</TD
><TD
>&#13;                <CODE
CLASS="varname"
>lo</CODE
>
              </TD
><TD
>Low 32 bits</TD
><TD
>Lower 32 bits of current time of the system time</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14165"
>Error Code</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14167"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="17%"
TITLE="c1"><COL
WIDTH="83%"
TITLE="c2"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_OK</SPAN
>
              </TD
><TD
>Normal completion</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_PAR</SPAN
>
              </TD
><TD
>Parameter error (<CODE
CLASS="varname"
>pk_tim</CODE
> is invalid)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14181"
>Valid Context</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14183"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="33%"><COL
WIDTH="33%"><COL
WIDTH="33%"><THEAD
><TR
><TH
ALIGN="center"
>Task portion</TH
><TH
ALIGN="center"
>Quasi-task portion</TH
><TH
ALIGN="center"
>Task-independent portion</TH
></TR
></THEAD
><TBODY
VALIGN="top"
><TR
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>NO</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14198"
>Related Service Profile Items</A
></H4
><P
>Only when all the service profile items below are set to be effective, this system call can be used.</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14201"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="38%"
TITLE="c1"><COL
WIDTH="62%"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <TT
CLASS="literal"
>TK_SUPPORT_UTC</TT
>
              </TD
><TD
>Support of UNIX time</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14210"
>Description</A
></H4
><P
>Reads the current value of the system clock and returns in it <CODE
CLASS="varname"
>pk_tim</CODE
>.</P
><P
>System time is expressed as cumulative milliseconds from 0:00:00, January 1, 1970 (UTC).</P
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14215"
>Additional Notes</A
></H4
><P
>The resolution of the current system time read by this API varies depending on the time resolution of the timer interrupt interval (cycle). Hence, this API cannot be used to get the elapsed time that is shorter than the timer interrupt interval (cycle). For more details, see the Additional Notes of <A
HREF="time_management_functions.html#tk_set_utc"
>tk_set_utc</A
>. To find out the elapsed time shorter than the timer interrupt interval (cycle), use the return parameter <CODE
CLASS="varname"
>ofs</CODE
> of <A
HREF="time_management_functions.html#tk_get_utc_u"
>tk_get_utc_u</A
> or <A
HREF="utk_ds_functions.html#td_get_utc"
>td_get_utc</A
>.</P
></DIV
></DIV
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="tk_get_utc_u"
>tk_get_utc_u - Get System Time (Microseconds)</A
></H3
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14224"
>C Language Interface</A
></H4
><DIV
CLASS="funcsynopsis"
><P
></P
><A
NAME="AEN14226"
></A
><PRE
CLASS="funcsynopsisinfo"
>#include &#60;tk/tkernel.h&#62;</PRE
><P
><CODE
><CODE
CLASS="FUNCDEF"
>ER ercd = tk_get_utc_u</CODE
>(SYSTIM_U *tim_u, UW *ofs);</CODE
></P
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14235"
>Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14237"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="15%"
TITLE="c1"><COL
WIDTH="15%"
TITLE="c2"><COL
WIDTH="31%"
TITLE="c3"><COL
WIDTH="38%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>SYSTIM_U*</TD
><TD
>&#13;                <CODE
CLASS="varname"
>tim_u</CODE
>
              </TD
><TD
>Time</TD
><TD
>Pointer to the area to return the current time (in microseconds)</TD
></TR
><TR
><TD
>UW*</TD
><TD
>&#13;                <CODE
CLASS="varname"
>ofs</CODE
>
              </TD
><TD
>Offset</TD
><TD
>Pointer to the area to return the return parameter <CODE
CLASS="varname"
>ofs</CODE
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14257"
>Return Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14259"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="15%"><COL
WIDTH="15%"><COL
WIDTH="31%"><COL
WIDTH="38%"><TBODY
VALIGN="top"
><TR
><TD
>ER</TD
><TD
>&#13;                <CODE
CLASS="varname"
>ercd</CODE
>
              </TD
><TD
>Error Code</TD
><TD
>Error code</TD
></TR
><TR
><TD
>SYSTIM_U</TD
><TD
>&#13;                <CODE
CLASS="varname"
>tim_u</CODE
>
              </TD
><TD
>Time</TD
><TD
>Current time (in microseconds)</TD
></TR
><TR
><TD
>UW</TD
><TD
>&#13;                <CODE
CLASS="varname"
>ofs</CODE
>
              </TD
><TD
>Offset</TD
><TD
>Relative elapsed time from <CODE
CLASS="varname"
>tim_u</CODE
> (in nanoseconds)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14285"
>Error Code</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14287"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="17%"
TITLE="c1"><COL
WIDTH="83%"
TITLE="c2"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_OK</SPAN
>
              </TD
><TD
>Normal completion</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_PAR</SPAN
>
              </TD
><TD
>Parameter error (invalid <CODE
CLASS="varname"
>tim_u</CODE
> or <CODE
CLASS="varname"
>ofs</CODE
>)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14302"
>Valid Context</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14304"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="33%"><COL
WIDTH="33%"><COL
WIDTH="33%"><THEAD
><TR
><TH
ALIGN="center"
>Task portion</TH
><TH
ALIGN="center"
>Quasi-task portion</TH
><TH
ALIGN="center"
>Task-independent portion</TH
></TR
></THEAD
><TBODY
VALIGN="top"
><TR
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>NO</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14319"
>Related Service Profile Items</A
></H4
><P
>Only when all the service profile items below are set to be effective, this system call can be used.</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14322"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="38%"
TITLE="c1"><COL
WIDTH="62%"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <TT
CLASS="literal"
>TK_SUPPORT_UTC</TT
>
              </TD
><TD
>Support of UNIX time</TD
></TR
><TR
><TD
>&#13;                <TT
CLASS="literal"
>TK_SUPPORT_USEC</TT
>
              </TD
><TD
>Support of microsecond</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14335"
>Description</A
></H4
><P
>This system call takes 64-bit <CODE
CLASS="varname"
>tim_u</CODE
> in microseconds instead of the return parameter <CODE
CLASS="varname"
>pk_tim</CODE
> of <A
HREF="time_management_functions.html#tk_get_utc"
>tk_get_utc</A
>. System time is expressed as cumulative microseconds from 0:00:00 (UTC), January 1, 1970. It also includes the return parameter <CODE
CLASS="varname"
>ofs</CODE
> that returns the relative time in nanoseconds.</P
><P
><CODE
CLASS="varname"
>tim_u</CODE
> has the resolution of time interrupt interval (cycle), but even more precise time information is obtained in <CODE
CLASS="varname"
>ofs</CODE
> as the elapsed time from <CODE
CLASS="varname"
>tim_u</CODE
> in nanoseconds. The resolution of <CODE
CLASS="varname"
>ofs</CODE
> is implementation-dependent, but generally is the resolution of hardware timer.</P
><P
>If <CODE
CLASS="varname"
>ofs</CODE
> = <TT
CLASS="literal"
>NULL</TT
>, the information of <CODE
CLASS="varname"
>ofs</CODE
> is not stored.</P
><P
>The specification of this system call is same as that of <A
HREF="time_management_functions.html#tk_get_utc"
>tk_get_utc</A
>, except the above-mentioned point. In addition, the specification of this system call is the same as that of <A
HREF="utk_ds_functions.html#td_get_utc"
>td_get_utc</A
>, except that the data type of <CODE
CLASS="varname"
>tim_u</CODE
> is SYSTIM_U. For more details, see the description of <A
HREF="time_management_functions.html#tk_get_utc"
>tk_get_utc</A
> and <A
HREF="utk_ds_functions.html#td_get_utc"
>td_get_utc</A
>.</P
></DIV
></DIV
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="tk_get_tim"
>tk_get_tim - Get System Time (TRON)</A
></H3
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14359"
>C Language Interface</A
></H4
><DIV
CLASS="funcsynopsis"
><P
></P
><A
NAME="AEN14361"
></A
><PRE
CLASS="funcsynopsisinfo"
>#include &#60;tk/tkernel.h&#62;</PRE
><P
><CODE
><CODE
CLASS="FUNCDEF"
>ER ercd = tk_get_tim</CODE
>(SYSTIM *pk_tim);</CODE
></P
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14368"
>Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14370"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="8%"
TITLE="c1"><COL
WIDTH="17%"
TITLE="c2"><COL
WIDTH="33%"
TITLE="c3"><COL
WIDTH="42%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>SYSTIM*</TD
><TD
>&#13;                <CODE
CLASS="varname"
>pk_tim</CODE
>
              </TD
><TD
>Packet of Current Time</TD
><TD
>Pointer to the area to return the current time (ms)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14383"
>Return Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14385"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="8%"><COL
WIDTH="17%"><COL
WIDTH="33%"><COL
WIDTH="42%"><TBODY
VALIGN="top"
><TR
><TD
>ER</TD
><TD
>&#13;                <CODE
CLASS="varname"
>ercd</CODE
>
              </TD
><TD
>Error Code</TD
><TD
>Error code</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
><P
><CODE
CLASS="varname"
>pk_tim</CODE
> Detail:</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14400"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="8%"
TITLE="c1"><COL
WIDTH="17%"
TITLE="c2"><COL
WIDTH="33%"
TITLE="c3"><COL
WIDTH="42%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>W</TD
><TD
>&#13;                <CODE
CLASS="varname"
>hi</CODE
>
              </TD
><TD
>High 32 bits</TD
><TD
>Higher 32 bits of current time of the system time</TD
></TR
><TR
><TD
>UW</TD
><TD
>&#13;                <CODE
CLASS="varname"
>lo</CODE
>
              </TD
><TD
>Low 32 bits</TD
><TD
>Lower 32 bits of current time of the system time</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14419"
>Error Code</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14421"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="17%"
TITLE="c1"><COL
WIDTH="83%"
TITLE="c2"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_OK</SPAN
>
              </TD
><TD
>Normal completion</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_PAR</SPAN
>
              </TD
><TD
>Parameter error (<CODE
CLASS="varname"
>pk_tim</CODE
> is invalid)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14435"
>Valid Context</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14437"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="33%"><COL
WIDTH="33%"><COL
WIDTH="33%"><THEAD
><TR
><TH
ALIGN="center"
>Task portion</TH
><TH
ALIGN="center"
>Quasi-task portion</TH
><TH
ALIGN="center"
>Task-independent portion</TH
></TR
></THEAD
><TBODY
VALIGN="top"
><TR
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>NO</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14452"
>Related Service Profile Items</A
></H4
><P
>Only when all the service profile items below are set to be effective, this system call can be used.</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14455"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="38%"
TITLE="c1"><COL
WIDTH="62%"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <TT
CLASS="literal"
>TK_SUPPORT_TRONTIME</TT
>
              </TD
><TD
>Support of TRON time</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14464"
>Description</A
></H4
><P
>Reads the current value of the system clock and returns in it <CODE
CLASS="varname"
>pk_tim</CODE
>. In the return parameter <CODE
CLASS="varname"
>hi</CODE
> and <CODE
CLASS="varname"
>lo</CODE
> of this API, system time is expressed as cumulative milliseconds from 0:00:00 (GMT), January 1, 1985.</P
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14470"
>Additional Notes</A
></H4
><P
>The resolution of the current system time read by this API varies depending on the time resolution of the timer interrupt interval (cycle). Hence, this API cannot be used to get the elapsed time that is shorter than the timer interrupt interval (cycle). For more details, see the Additional Notes of <A
HREF="time_management_functions.html#tk_set_utc"
>tk_set_utc</A
>. To find out the elapsed time shorter than the timer interrupt interval (cycle), use the return parameter <CODE
CLASS="varname"
>ofs</CODE
> of <A
HREF="time_management_functions.html#tk_get_tim_u"
>tk_get_tim_u</A
> or <A
HREF="utk_ds_functions.html#td_get_tim"
>td_get_tim</A
>.</P
><P
><A
HREF="time_management_functions.html#tk_get_tim"
>tk_get_tim</A
> is very similar to <A
HREF="time_management_functions.html#tk_get_utc"
>tk_get_utc</A
>. However, it uses the time system with a different epoch. <A
HREF="time_management_functions.html#tk_get_tim"
>tk_get_tim</A
> is an API to keep compatibility with legacy μT-Kernel or T-Kernel specifications.</P
></DIV
></DIV
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="tk_get_tim_u"
>tk_get_tim_u - Get System Time (TRON, Microseconds)</A
></H3
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14483"
>C Language Interface</A
></H4
><DIV
CLASS="funcsynopsis"
><P
></P
><A
NAME="AEN14485"
></A
><PRE
CLASS="funcsynopsisinfo"
>#include &#60;tk/tkernel.h&#62;</PRE
><P
><CODE
><CODE
CLASS="FUNCDEF"
>ER ercd = tk_get_tim_u</CODE
>(SYSTIM_U *tim_u, UW *ofs);</CODE
></P
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14494"
>Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14496"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="15%"
TITLE="c1"><COL
WIDTH="15%"
TITLE="c2"><COL
WIDTH="31%"
TITLE="c3"><COL
WIDTH="38%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>SYSTIM_U*</TD
><TD
>&#13;                <CODE
CLASS="varname"
>tim_u</CODE
>
              </TD
><TD
>Time</TD
><TD
>Pointer to the area to return the current time (in microseconds)</TD
></TR
><TR
><TD
>UW*</TD
><TD
>&#13;                <CODE
CLASS="varname"
>ofs</CODE
>
              </TD
><TD
>Offset</TD
><TD
>Pointer to the area to return the return parameter <CODE
CLASS="varname"
>ofs</CODE
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14516"
>Return Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14518"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="15%"><COL
WIDTH="15%"><COL
WIDTH="31%"><COL
WIDTH="38%"><TBODY
VALIGN="top"
><TR
><TD
>ER</TD
><TD
>&#13;                <CODE
CLASS="varname"
>ercd</CODE
>
              </TD
><TD
>Error Code</TD
><TD
>Error code</TD
></TR
><TR
><TD
>SYSTIM_U</TD
><TD
>&#13;                <CODE
CLASS="varname"
>tim_u</CODE
>
              </TD
><TD
>Time</TD
><TD
>Current time (in microseconds)</TD
></TR
><TR
><TD
>UW</TD
><TD
>&#13;                <CODE
CLASS="varname"
>ofs</CODE
>
              </TD
><TD
>Offset</TD
><TD
>Relative elapsed time from <CODE
CLASS="varname"
>tim_u</CODE
> (in nanoseconds)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14544"
>Error Code</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14546"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="17%"
TITLE="c1"><COL
WIDTH="83%"
TITLE="c2"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_OK</SPAN
>
              </TD
><TD
>Normal completion</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_PAR</SPAN
>
              </TD
><TD
>Parameter error (invalid <CODE
CLASS="varname"
>tim_u</CODE
> or <CODE
CLASS="varname"
>ofs</CODE
>)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14561"
>Valid Context</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14563"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="33%"><COL
WIDTH="33%"><COL
WIDTH="33%"><THEAD
><TR
><TH
ALIGN="center"
>Task portion</TH
><TH
ALIGN="center"
>Quasi-task portion</TH
><TH
ALIGN="center"
>Task-independent portion</TH
></TR
></THEAD
><TBODY
VALIGN="top"
><TR
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>NO</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14578"
>Related Service Profile Items</A
></H4
><P
>Only when all the service profile items below are set to be effective, this system call can be used.</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14581"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="38%"
TITLE="c1"><COL
WIDTH="62%"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <TT
CLASS="literal"
>TK_SUPPORT_TRONTIME</TT
>
              </TD
><TD
>Support of TRON time</TD
></TR
><TR
><TD
>&#13;                <TT
CLASS="literal"
>TK_SUPPORT_USEC</TT
>
              </TD
><TD
>Support of microsecond</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14594"
>Description</A
></H4
><P
>This system call takes 64-bit <CODE
CLASS="varname"
>tim_u</CODE
> in microseconds instead of the return parameter <CODE
CLASS="varname"
>pk_tim</CODE
> of <A
HREF="time_management_functions.html#tk_get_tim"
>tk_get_tim</A
>. In the return parameter <CODE
CLASS="varname"
>tim_u</CODE
> of this API, system time is expressed as cumulative microseconds from 0:00:00 (GMT), January 1, 1985. It also includes the return parameter <CODE
CLASS="varname"
>ofs</CODE
> that returns the relative time in nanoseconds.</P
><P
><CODE
CLASS="varname"
>tim_u</CODE
> has the resolution of time interrupt interval (cycle), but even more precise time information is obtained in <CODE
CLASS="varname"
>ofs</CODE
> as the elapsed time from <CODE
CLASS="varname"
>tim_u</CODE
> in nanoseconds. The resolution of <CODE
CLASS="varname"
>ofs</CODE
> is implementation-dependent, but generally is the resolution of hardware timer.</P
><P
>If <CODE
CLASS="varname"
>ofs</CODE
> = <TT
CLASS="literal"
>NULL</TT
>, the information of <CODE
CLASS="varname"
>ofs</CODE
> is not stored.</P
><P
>The specification of this system call is same as that of <A
HREF="time_management_functions.html#tk_get_tim"
>tk_get_tim</A
>, except the above-mentioned point. In addition, the specification of this system call is the same as that of <A
HREF="utk_ds_functions.html#td_get_tim"
>td_get_tim</A
>, except that the data type of <CODE
CLASS="varname"
>tim_u</CODE
> is SYSTIM_U. For more details, see the description of <A
HREF="time_management_functions.html#tk_get_tim"
>tk_get_tim</A
> and <A
HREF="utk_ds_functions.html#td_get_tim"
>td_get_tim</A
>.</P
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14617"
>Additional Notes</A
></H4
><P
><A
HREF="time_management_functions.html#tk_get_tim_u"
>tk_get_tim_u</A
> is very similar to <A
HREF="time_management_functions.html#tk_get_utc_u"
>tk_get_utc_u</A
>. However, it uses the time system with a different epoch. <A
HREF="time_management_functions.html#tk_get_tim_u"
>tk_get_tim_u</A
> is an API to keep compatibility with legacy μT-Kernel or T-Kernel specifications.</P
></DIV
></DIV
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="tk_get_otm"
>tk_get_otm - Get Operating Time</A
></H3
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14625"
>C Language Interface</A
></H4
><DIV
CLASS="funcsynopsis"
><P
></P
><A
NAME="AEN14627"
></A
><PRE
CLASS="funcsynopsisinfo"
>#include &#60;tk/tkernel.h&#62;</PRE
><P
><CODE
><CODE
CLASS="FUNCDEF"
>ER ercd = tk_get_otm</CODE
>(SYSTIM *pk_tim);</CODE
></P
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14634"
>Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14636"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="8%"
TITLE="c1"><COL
WIDTH="17%"
TITLE="c2"><COL
WIDTH="33%"
TITLE="c3"><COL
WIDTH="42%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>SYSTIM*</TD
><TD
>&#13;                <CODE
CLASS="varname"
>pk_tim</CODE
>
              </TD
><TD
>Packet of Operating Time</TD
><TD
>Pointer to the area to return the operating time (ms)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14649"
>Return Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14651"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="8%"><COL
WIDTH="17%"><COL
WIDTH="33%"><COL
WIDTH="42%"><TBODY
VALIGN="top"
><TR
><TD
>ER</TD
><TD
>&#13;                <CODE
CLASS="varname"
>ercd</CODE
>
              </TD
><TD
>Error Code</TD
><TD
>Error code</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
><P
><CODE
CLASS="varname"
>pk_tim</CODE
> Detail:</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14666"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="8%"
TITLE="c1"><COL
WIDTH="17%"
TITLE="c2"><COL
WIDTH="33%"
TITLE="c3"><COL
WIDTH="42%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>W</TD
><TD
>&#13;                <CODE
CLASS="varname"
>hi</CODE
>
              </TD
><TD
>High 32 bits</TD
><TD
>Higher 32 bits of the system operating time</TD
></TR
><TR
><TD
>UW</TD
><TD
>&#13;                <CODE
CLASS="varname"
>lo</CODE
>
              </TD
><TD
>Low 32 bits</TD
><TD
>Lower 32 bits of the system operating time</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14685"
>Error Code</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14687"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="17%"
TITLE="c1"><COL
WIDTH="83%"
TITLE="c2"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_OK</SPAN
>
              </TD
><TD
>Normal completion</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_PAR</SPAN
>
              </TD
><TD
>Parameter error (<CODE
CLASS="varname"
>pk_tim</CODE
> is invalid)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14701"
>Valid Context</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14703"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="33%"><COL
WIDTH="33%"><COL
WIDTH="33%"><THEAD
><TR
><TH
ALIGN="center"
>Task portion</TH
><TH
ALIGN="center"
>Quasi-task portion</TH
><TH
ALIGN="center"
>Task-independent portion</TH
></TR
></THEAD
><TBODY
VALIGN="top"
><TR
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>NO</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14718"
>Related Service Profile Items</A
></H4
><P
>None.</P
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14721"
>Description</A
></H4
><P
>Gets the system operating time (up time).</P
><P
>System operating time, unlike system time, indicates the length of time elapsed linearly since the system was started. It is not affected by clock settings made by <A
HREF="time_management_functions.html#tk_set_utc"
>tk_set_utc</A
> or <A
HREF="time_management_functions.html#tk_set_tim"
>tk_set_tim</A
>.</P
><P
>System operating time must have the same precision as system time.</P
></DIV
></DIV
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="tk_get_otm_u"
>tk_get_otm_u - Get Operating Time (Microseconds)</A
></H3
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14730"
>C Language Interface</A
></H4
><DIV
CLASS="funcsynopsis"
><P
></P
><A
NAME="AEN14732"
></A
><PRE
CLASS="funcsynopsisinfo"
>#include &#60;tk/tkernel.h&#62;</PRE
><P
><CODE
><CODE
CLASS="FUNCDEF"
>ER ercd = tk_get_otm_u</CODE
>(SYSTIM_U *tim_u, UW *ofs);</CODE
></P
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14741"
>Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14743"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="15%"
TITLE="c1"><COL
WIDTH="15%"
TITLE="c2"><COL
WIDTH="31%"
TITLE="c3"><COL
WIDTH="38%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>SYSTIM_U*</TD
><TD
>&#13;                <CODE
CLASS="varname"
>tim_u</CODE
>
              </TD
><TD
>Time</TD
><TD
>Pointer to the area to return the operating time (in microseconds)</TD
></TR
><TR
><TD
>UW*</TD
><TD
>&#13;                <CODE
CLASS="varname"
>ofs</CODE
>
              </TD
><TD
>Offset</TD
><TD
>Pointer to the area to return the return parameter <CODE
CLASS="varname"
>ofs</CODE
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14763"
>Return Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14765"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="15%"><COL
WIDTH="15%"><COL
WIDTH="31%"><COL
WIDTH="38%"><TBODY
VALIGN="top"
><TR
><TD
>ER</TD
><TD
>&#13;                <CODE
CLASS="varname"
>ercd</CODE
>
              </TD
><TD
>Error Code</TD
><TD
>Error Codes</TD
></TR
><TR
><TD
>SYSTIM_U</TD
><TD
>&#13;                <CODE
CLASS="varname"
>tim_u</CODE
>
              </TD
><TD
>Time</TD
><TD
>Operating time (in microseconds)</TD
></TR
><TR
><TD
>UW</TD
><TD
>&#13;                <CODE
CLASS="varname"
>ofs</CODE
>
              </TD
><TD
>Offset</TD
><TD
>Relative elapsed time from <CODE
CLASS="varname"
>tim_u</CODE
> (in nanoseconds)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14791"
>Error Code</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14793"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="17%"
TITLE="c1"><COL
WIDTH="83%"
TITLE="c2"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_OK</SPAN
>
              </TD
><TD
>Normal completion</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_PAR</SPAN
>
              </TD
><TD
>Parameter error (invalid <CODE
CLASS="varname"
>tim_u</CODE
> or <CODE
CLASS="varname"
>ofs</CODE
>)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14808"
>Valid Context</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14810"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="33%"><COL
WIDTH="33%"><COL
WIDTH="33%"><THEAD
><TR
><TH
ALIGN="center"
>Task portion</TH
><TH
ALIGN="center"
>Quasi-task portion</TH
><TH
ALIGN="center"
>Task-independent portion</TH
></TR
></THEAD
><TBODY
VALIGN="top"
><TR
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>NO</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14825"
>Related Service Profile Items</A
></H4
><P
>Only when all the service profile items below are set to be effective, this system call can be used.</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14828"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="38%"
TITLE="c1"><COL
WIDTH="62%"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <TT
CLASS="literal"
>TK_SUPPORT_USEC</TT
>
              </TD
><TD
>Support of microsecond</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14837"
>Description</A
></H4
><P
>This system call takes 64-bit <CODE
CLASS="varname"
>tim_u</CODE
> in microseconds instead of the return parameter <CODE
CLASS="varname"
>pk_tim</CODE
> of <A
HREF="time_management_functions.html#tk_get_otm"
>tk_get_otm</A
>. It also includes the return parameter <CODE
CLASS="varname"
>ofs</CODE
> that returns the relative time in nanoseconds.</P
><P
><CODE
CLASS="varname"
>tim_u</CODE
> has the resolution of time interrupt interval (cycle), but even more precise time information is obtained in <CODE
CLASS="varname"
>ofs</CODE
> as the elapsed time from <CODE
CLASS="varname"
>tim_u</CODE
> in nanoseconds. The resolution of <CODE
CLASS="varname"
>ofs</CODE
> is implementation-dependent, but generally is the resolution of hardware timer.</P
><P
>If <CODE
CLASS="varname"
>ofs</CODE
> = <TT
CLASS="literal"
>NULL</TT
> is set, the information of <CODE
CLASS="varname"
>ofs</CODE
> is not stored.</P
><P
>The specification of this system call is same as that of <A
HREF="time_management_functions.html#tk_get_otm"
>tk_get_otm</A
>, except the above-mentioned point. In addition, the specification of this system call is the same as that of <A
HREF="utk_ds_functions.html#td_get_otm"
>td_get_otm</A
>, except that the data type of <CODE
CLASS="varname"
>tim_u</CODE
> is SYSTIM_U. For more details, see the description of <A
HREF="time_management_functions.html#tk_get_otm"
>tk_get_otm</A
> and <A
HREF="utk_ds_functions.html#td_get_otm"
>td_get_otm</A
>.</P
></DIV
></DIV
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="cyclic_handler"
>Cyclic Handler</A
></H2
><P
>A cyclic handler is a time event handler started at regular intervals. Cyclic handler functions are provided for creating and deleting a cyclic handler, activating and deactivating a cyclic handler operation, and referencing cyclic handler status. A cyclic handler is an object identified by an ID number. The ID number for the cyclic handler is called a cyclic handler ID.</P
><P
>The time interval at which a cyclic handler is started (cycle time) and the cycle phase are specified for each cyclic handler when it is created. When a cyclic handler operation is requested, T-Kernel determines the time at which the cyclic handler should next be started based on the cycle time and cycle phase set for it. When a cyclic handler is created, the time when it is to be started next is the time of its creation plus the cycle phase. When the time comes to start a cyclic handler, <CODE
CLASS="varname"
>exinf</CODE
>, containing extended information about the cyclic handler, is passed to it as a starting parameter. The time when the cyclic handler is started plus its cycle time becomes the next start time. Sometimes when a cyclic handler is activated, the next start time will be newly set.</P
><P
>In principle the cycle phase of a cyclic handler is no longer than its cycle time. The behavior is implementation-dependent when the cycle phase is made longer than the cycle time.</P
><P
>A cyclic handler has two activation states, active and inactive. While a cyclic handler is inactive, it is not started even when its start time arrives, although calculation of the next start time does take place. When a system call for activating a cyclic handler is called (<A
HREF="time_management_functions.html#tk_sta_cyc"
>tk_sta_cyc</A
>), the cyclic handler goes to active state, and the next start time is decided if necessary. When a system call for deactivating a cyclic handler is called (<A
HREF="time_management_functions.html#tk_stp_cyc"
>tk_stp_cyc</A
>), the cyclic handler goes to inactive state. Whether a cyclic handler upon creation is active or inactive is decided by a cyclic handler attribute.</P
><P
>The cycle phase of a cyclic handler is a relative time specifying the first time the cyclic handler is to be started, in relation to the time when the system call creating it was invoked. The cycle time of a cyclic handler is likewise a relative time, specifying the next time the cyclic handler is to be started in relation to the time it should have started (not the time it started). For this reason, the intervals between times the cyclic handler is started will individually be shorter than the cycle time in some cases, but their average over a longer time span will match the cycle time.</P
><DIV
CLASS="note"
><P
></P
><TABLE
CLASS="note"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.gif"
HSPACE="5"
ALT="Note"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Additional Notes</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Actual time resolution in μT-Kernel time management functions processing uses one that is specified by the "timer interrupt interval" (<TT
CLASS="literal"
>TTimPeriod</TT
>) in <A
HREF="system_configuration_information_management_functions.html#standard_system_configuration_information"
>the Section called <I
>Standard System Configuration Information</I
> in the Chapter called <I
>μT-Kernel/SM Functions</I
></A
>. It also means that a cyclic handler or an alarm handler is actually started at the time according to the time resolution provided by the timer interrupt interval (<TT
CLASS="literal"
>TTimPeriod</TT
>). For this reason, the cyclic handler is actually started at the time of timer interrupt occurrence immediately after the time when the cyclic handler should be started. A general μT-Kernel implementation checks if a cyclic handler or an alarm handler that is to be started within the processing of timer interrupt exists, and then starts them as necessary.</P
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="tk_cre_cyc"
>tk_cre_cyc - Create Cyclic Handler</A
></H3
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14877"
>C Language Interface</A
></H4
><DIV
CLASS="funcsynopsis"
><P
></P
><A
NAME="AEN14879"
></A
><PRE
CLASS="funcsynopsisinfo"
>#include &#60;tk/tkernel.h&#62;</PRE
><P
><CODE
><CODE
CLASS="FUNCDEF"
>ID cycid = tk_cre_cyc</CODE
>(CONST T_CCYC *pk_ccyc);</CODE
></P
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14886"
>Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14888"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="21%"><COL
WIDTH="14%"><COL
WIDTH="29%"><COL
WIDTH="36%"><TBODY
VALIGN="top"
><TR
><TD
>CONST T_CCYC*</TD
><TD
>&#13;                <CODE
CLASS="varname"
>pk_ccyc</CODE
>
              </TD
><TD
>Packet to Create Cyclic Handler</TD
><TD
>Cyclic handler definition information</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
><P
><CODE
CLASS="varname"
>pk_ccyc</CODE
> Detail:</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14903"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="21%"
TITLE="c1"><COL
WIDTH="14%"
TITLE="c2"><COL
WIDTH="29%"
TITLE="c3"><COL
WIDTH="36%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>void*</TD
><TD
>&#13;                <CODE
CLASS="varname"
>exinf</CODE
>
              </TD
><TD
>Extended Information</TD
><TD
>Extended information</TD
></TR
><TR
><TD
>ATR</TD
><TD
>&#13;                <CODE
CLASS="varname"
>cycatr</CODE
>
              </TD
><TD
>Cyclic Handler Attribute</TD
><TD
>Cyclic handler attribute</TD
></TR
><TR
><TD
>FP</TD
><TD
>&#13;                <CODE
CLASS="varname"
>cychdr</CODE
>
              </TD
><TD
>Cyclic Handler Address</TD
><TD
>Cyclic handler address</TD
></TR
><TR
><TD
>RELTIM</TD
><TD
>&#13;                <CODE
CLASS="varname"
>cyctim</CODE
>
              </TD
><TD
>Cycle Time</TD
><TD
>Interval of cyclic start (ms)</TD
></TR
><TR
><TD
>RELTIM</TD
><TD
>&#13;                <CODE
CLASS="varname"
>cycphs</CODE
>
              </TD
><TD
>Cycle Phase</TD
><TD
>Cycle phase (ms)</TD
></TR
><TR
><TD
>UB</TD
><TD
>&#13;                <CODE
CLASS="varname"
>dsname[8]</CODE
>
              </TD
><TD
>DS Object name</TD
><TD
>DS object name</TD
></TR
><TR
><TD
COLSPAN="4"
>(Other implementation-dependent parameters may be added beyond this point.)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14948"
>Return Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14950"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="21%"
TITLE="c1"><COL
WIDTH="14%"
TITLE="c2"><COL
WIDTH="29%"
TITLE="c3"><COL
WIDTH="36%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>ID</TD
><TD
>&#13;                <CODE
CLASS="varname"
>cycid</CODE
>
              </TD
><TD
>Cyclic Handler ID</TD
><TD
>Cyclic handler ID</TD
></TR
><TR
><TD
COLSPAN="2"
ALIGN="right"
>or</TD
><TD
>Error Code</TD
><TD
>Error code</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14967"
>Error Code</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14969"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="17%"
TITLE="c1"><COL
WIDTH="83%"
TITLE="c2"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_NOMEM</SPAN
>
              </TD
><TD
>Insufficient memory (memory for control block cannot be allocated)</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_LIMIT</SPAN
>
              </TD
><TD
>Number of cyclic handlers exceeds the system limit</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_RSATR</SPAN
>
              </TD
><TD
>Reserved attribute (<CODE
CLASS="varname"
>cycatr</CODE
> is invalid or cannot be used)</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_PAR</SPAN
>
              </TD
><TD
>Parameter error (<CODE
CLASS="varname"
>pk_ccyc</CODE
>, <CODE
CLASS="varname"
>cychdr</CODE
>, <CODE
CLASS="varname"
>cyctim</CODE
>, or <CODE
CLASS="varname"
>cycphs</CODE
> is invalid or cannot be used)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN14995"
>Valid Context</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN14997"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="33%"><COL
WIDTH="33%"><COL
WIDTH="33%"><THEAD
><TR
><TH
ALIGN="center"
>Task portion</TH
><TH
ALIGN="center"
>Quasi-task portion</TH
><TH
ALIGN="center"
>Task-independent portion</TH
></TR
></THEAD
><TBODY
VALIGN="top"
><TR
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>NO</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15012"
>Related Service Profile Items</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15014"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="38%"
TITLE="c1"><COL
WIDTH="62%"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <TT
CLASS="literal"
>TK_SUPPORT_ASM</TT
>
              </TD
><TD
>Support for specifying <TT
CLASS="literal"
>TA_ASM</TT
> for cyclic handler attribute</TD
></TR
><TR
><TD
>&#13;                <TT
CLASS="literal"
>TK_SUPPORT_DSNAME</TT
>
              </TD
><TD
>Support for specifying <TT
CLASS="literal"
>TA_DSNAME</TT
> for cyclic handler attribute</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15029"
>Description</A
></H4
><P
>Creates a cyclic handler, assigning to it a cyclic handler ID. This is performed by assigning a control block for the generated cyclic handler.</P
><P
>A cyclic handler is a handler running at specified intervals as a task-independent portion.</P
><P
><CODE
CLASS="varname"
>exinf</CODE
> can be used freely by the user to set miscellaneous information about the created cyclic handler. The information set in this parameter can be referenced by <A
HREF="time_management_functions.html#tk_ref_cyc"
>tk_ref_cyc</A
>. If a larger area is needed for indicating user information, or if the information may need to be changed after the message buffer is created, this can be done by allocating separate memory for this purpose and putting the memory packet address in <CODE
CLASS="varname"
>exinf</CODE
>. The kernel pays no attention to the contents of <CODE
CLASS="varname"
>exinf</CODE
>.</P
><P
><CODE
CLASS="varname"
>cycatr</CODE
> indicates system attributes in its lower bits and implementation-dependent attributes in its higher bits. The system attribute part of <CODE
CLASS="varname"
>cycatr</CODE
> is as follows.</P
><PRE
CLASS="synopsis"
>&#13;cycatr := (TA_ASM || TA_HLNG) | [TA_STA] | [TA_PHS] | [TA_DSNAME]
</PRE
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15042"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="17%"
TITLE="c1"><COL
WIDTH="83%"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <TT
CLASS="literal"
>TA_ASM</TT
>
              </TD
><TD
>The handler is written in assembly language</TD
></TR
><TR
><TD
>&#13;                <TT
CLASS="literal"
>TA_HLNG</TT
>
              </TD
><TD
>The handler is written in high-level language</TD
></TR
><TR
><TD
>&#13;                <TT
CLASS="literal"
>TA_STA</TT
>
              </TD
><TD
>Activate immediately upon cyclic handler creation</TD
></TR
><TR
><TD
>&#13;                <TT
CLASS="literal"
>TA_PHS</TT
>
              </TD
><TD
>Save the cycle phase</TD
></TR
><TR
><TD
>&#13;                <TT
CLASS="literal"
>TA_DSNAME</TT
>
              </TD
><TD
>Specifies DS object name</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
><PRE
CLASS="programlisting"
>&#13;#define TA_ASM          0x00000000      /* assembly language program */
#define TA_HLNG         0x00000001      /* high-level language program */
#define TA_STA          0x00000002      /* activate cyclic handler */
#define TA_PHS          0x00000004      /* save cyclic handler cycle phase */
#define TA_DSNAME       0x00000040      /* DS object name */
</PRE
><P
><CODE
CLASS="varname"
>cychdr</CODE
> specifies the cyclic handler start address, <CODE
CLASS="varname"
>cyctim</CODE
> the cycle time, and <CODE
CLASS="varname"
>cycphs</CODE
> the cycle phase.</P
><P
>When the <TT
CLASS="literal"
>TA_HLNG</TT
> attribute is specified, the cyclic handler is started via a high-level language support routine. The high-level language support routine takes care of saving and restoring register values. The cyclic handler terminates by a simple return from a function. The cyclic handler takes the following format when the <TT
CLASS="literal"
>TA_HLNG</TT
> attribute is specified.</P
><PRE
CLASS="programlisting"
>&#13;void cychdr( void *exinf )
{
        /*
                (processing)
        */

        return; /* Exit cyclic handler*/
}
</PRE
><P
>The cyclic handler format when the <TT
CLASS="literal"
>TA_ASM</TT
> attribute is specified is implementation-dependent, but <CODE
CLASS="varname"
>exinf</CODE
> must be passed in a starting parameter.</P
><P
><CODE
CLASS="varname"
>cycphs</CODE
> indicates the length of time until the cyclic handler is initially started after being created by <A
HREF="time_management_functions.html#tk_cre_cyc"
>tk_cre_cyc</A
>. Thereafter it is started periodically at the interval set in <CODE
CLASS="varname"
>cyctim</CODE
>. If zero is specified in <CODE
CLASS="varname"
>cycphs</CODE
>, the cyclic handler starts immediately after it is created. Zero cannot be specified in <CODE
CLASS="varname"
>cyctim</CODE
>.</P
><P
>The starting of the cyclic handler for the nth time occurs after at least <CODE
CLASS="varname"
>cycphs</CODE
> + <CODE
CLASS="varname"
>cyctim</CODE
> * (n - 1) time has elapsed from the cyclic handler creation.</P
><P
>When <TT
CLASS="literal"
>TA_STA</TT
> is specified, the cyclic handler goes to active state immediately on creation, and starts at the intervals noted above. If <TT
CLASS="literal"
>TA_STA</TT
> is not specified, the cycle time is calculated but the cyclic handler is not actually started.</P
><P
>When <TT
CLASS="literal"
>TA_PHS</TT
> is specified, then even if <A
HREF="time_management_functions.html#tk_sta_cyc"
>tk_sta_cyc</A
> is called activating the cyclic handler, the cycle time is not reset, and the cycle time calculated as above from the time of cyclic handler creation continues to apply. If <TT
CLASS="literal"
>TA_PHS</TT
> is not specified, calling <A
HREF="time_management_functions.html#tk_sta_cyc"
>tk_sta_cyc</A
> resets the cycle time and the cyclic handler is started at <CODE
CLASS="varname"
>cyctim</CODE
> intervals measured from the time <A
HREF="time_management_functions.html#tk_sta_cyc"
>tk_sta_cyc</A
> was called. Note that the resetting of cycle time by <A
HREF="time_management_functions.html#tk_sta_cyc"
>tk_sta_cyc</A
> does not affect <CODE
CLASS="varname"
>cycphs</CODE
>. In this case the starting of the cyclic handler for the nth time occurs after at least <CODE
CLASS="varname"
>cyctim</CODE
> * n has elapsed from the calling of <A
HREF="time_management_functions.html#tk_sta_cyc"
>tk_sta_cyc</A
><A
HREF="time_management_functions.html#tk_sta_cyc"
></A
>.</P
><P
>Even if a system call is invoked from a cyclic handler and this causes the task in RUNNING state up to that time to go to another state, with a different task going to RUNNING state, dispatching (task switching) does not occur while the cyclic handler is running. Completion of execution by the cyclic handler has precedence even if dispatching is necessary; only when the cyclic handler terminates does the dispatch take place. In other words, a dispatch request that is generated while a cyclic handler is running is not processed immediately, but is delayed until the cyclic handler terminates. This is called delayed dispatching.</P
><P
>A cyclic handler runs as a task-independent portion. As such, it is not possible to call in a cyclic handler a system call that can enter WAITING state, or one that is intended for the invoking task.</P
><P
>When <TT
CLASS="literal"
>TA_DSNAME</TT
> is specified, <CODE
CLASS="varname"
>dsname</CODE
> is valid and specifies the DS object name. DS object name is used to identify objects by debugger, and it is handled only by T-Kernel/DS API, <A
HREF="utk_ds_functions.html#td_ref_dsname"
>td_ref_dsname</A
> and <A
HREF="utk_ds_functions.html#td_set_dsname"
>td_set_dsname</A
>. For more details, see the description of <A
HREF="utk_ds_functions.html#td_ref_dsname"
>td_ref_dsname</A
> and <A
HREF="utk_ds_functions.html#td_set_dsname"
>td_set_dsname</A
>. If <TT
CLASS="literal"
>TA_DSNAME</TT
> is not specified, <CODE
CLASS="varname"
>dsname</CODE
> is ignored. Then <A
HREF="utk_ds_functions.html#td_ref_dsname"
>td_ref_dsname</A
> and <A
HREF="utk_ds_functions.html#td_set_dsname"
>td_set_dsname</A
> return <SPAN
CLASS="errorname"
>E_OBJ</SPAN
> error.</P
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15117"
>Additional Notes</A
></H4
><P
>Once a cyclic handler is defined, it continues to run at the specified cycles either until <A
HREF="time_management_functions.html#tk_stp_cyc"
>tk_stp_cyc</A
> is called to deactivate it or until it is deleted. There is no parameter to specify the number of cycles in <A
HREF="time_management_functions.html#tk_cre_cyc"
>tk_cre_cyc</A
>.</P
><P
>When multiple time event handlers or interrupt handlers operate at the same time, it is implementation-dependent whether to have them run serially (after one handler exits, another starts) or in a nested manner (one handler operation is suspended, another runs, and when that one finishes the previous one resumes). In either case, since time event handlers and interrupt handlers run as task-independent portion, the principle of delayed dispatching applies.</P
><P
>If 0 is specified in <CODE
CLASS="varname"
>cycphs</CODE
>, the first startup of the cyclic handler is executed immediately after this system call execution. However, depending on the implementation, the first startup (execution) of the cyclic handler may be executed while processing this system call, instead of immediately after the completion of this system call execution. In such case, the interrupt disabled or other state in the cyclic handler may differ from the state at the second and subsequent ordinary startups. In addition, when 0 is set to <CODE
CLASS="varname"
>cycphs</CODE
>, the first startup of the cyclic handler is executed without waiting for a timer interrupt, that is, regardless of the timer interrupt interval. This behavior also differs from the second and subsequent startups of the cyclic handler, and from the startup of the cyclic handler with <CODE
CLASS="varname"
>cycphs</CODE
> set to other than 0.</P
></DIV
></DIV
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="tk_cre_cyc_u"
>tk_cre_cyc_u - Create Cyclic Handler (Microseconds)</A
></H3
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15129"
>C Language Interface</A
></H4
><DIV
CLASS="funcsynopsis"
><P
></P
><A
NAME="AEN15131"
></A
><PRE
CLASS="funcsynopsisinfo"
>#include &#60;tk/tkernel.h&#62;</PRE
><P
><CODE
><CODE
CLASS="FUNCDEF"
>ID cycid = tk_cre_cyc_u</CODE
>(CONST T_CCYC_U *pk_ccyc_u);</CODE
></P
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15138"
>Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15140"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="21%"><COL
WIDTH="14%"><COL
WIDTH="29%"><COL
WIDTH="36%"><TBODY
VALIGN="top"
><TR
><TD
>CONST T_CCYC_U*</TD
><TD
>&#13;                <CODE
CLASS="varname"
>pk_ccyc_u</CODE
>
              </TD
><TD
>Packet to Create Cyclic Handler</TD
><TD
>Cyclic handler definition information</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
><P
><CODE
CLASS="varname"
>pk_ccyc_u</CODE
> Detail:</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15155"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="21%"
TITLE="c1"><COL
WIDTH="14%"
TITLE="c2"><COL
WIDTH="29%"
TITLE="c3"><COL
WIDTH="36%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>void*</TD
><TD
>&#13;                <CODE
CLASS="varname"
>exinf</CODE
>
              </TD
><TD
>Extended Information</TD
><TD
>Extended information</TD
></TR
><TR
><TD
>ATR</TD
><TD
>&#13;                <CODE
CLASS="varname"
>cycatr</CODE
>
              </TD
><TD
>Cyclic Handler Attribute</TD
><TD
>Cyclic handler attribute</TD
></TR
><TR
><TD
>FP</TD
><TD
>&#13;                <CODE
CLASS="varname"
>cychdr</CODE
>
              </TD
><TD
>Cyclic Handler Address</TD
><TD
>Cyclic handler address</TD
></TR
><TR
><TD
>RELTIM_U</TD
><TD
>&#13;                <CODE
CLASS="varname"
>cyctim_u</CODE
>
              </TD
><TD
>Cycle Time</TD
><TD
>Interval of cyclic start (in microseconds)</TD
></TR
><TR
><TD
>RELTIM_U</TD
><TD
>&#13;                <CODE
CLASS="varname"
>cycphs_u</CODE
>
              </TD
><TD
>Cycle Phase</TD
><TD
>Cycle phase (in microseconds)</TD
></TR
><TR
><TD
>UB</TD
><TD
>&#13;                <CODE
CLASS="varname"
>dsname[8]</CODE
>
              </TD
><TD
>DS Object name</TD
><TD
>DS object name</TD
></TR
><TR
><TD
COLSPAN="4"
>(Other implementation-dependent parameters may be added beyond this point.)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15200"
>Return Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15202"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="21%"
TITLE="c1"><COL
WIDTH="14%"
TITLE="c2"><COL
WIDTH="29%"
TITLE="c3"><COL
WIDTH="36%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>ID</TD
><TD
>&#13;                <CODE
CLASS="varname"
>cycid</CODE
>
              </TD
><TD
>Cyclic Handler ID</TD
><TD
>Cyclic handler ID</TD
></TR
><TR
><TD
COLSPAN="2"
ALIGN="right"
>or</TD
><TD
>Error Code</TD
><TD
>Error code</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15219"
>Error Code</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15221"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="17%"
TITLE="c1"><COL
WIDTH="83%"
TITLE="c2"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_NOMEM</SPAN
>
              </TD
><TD
>Insufficient memory (memory for control block cannot be allocated)</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_LIMIT</SPAN
>
              </TD
><TD
>Number of cyclic handlers exceeds the system limit</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_RSATR</SPAN
>
              </TD
><TD
>Reserved attribute (<CODE
CLASS="varname"
>cycatr</CODE
> is invalid or cannot be used)</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_PAR</SPAN
>
              </TD
><TD
>Parameter error (<CODE
CLASS="varname"
>pk_ccyc_u</CODE
>, <CODE
CLASS="varname"
>cychdr</CODE
>, <CODE
CLASS="varname"
>cyctim_u</CODE
>, or <CODE
CLASS="varname"
>cycphs_u</CODE
> is invalid or cannot be used)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15247"
>Valid Context</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15249"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="33%"><COL
WIDTH="33%"><COL
WIDTH="33%"><THEAD
><TR
><TH
ALIGN="center"
>Task portion</TH
><TH
ALIGN="center"
>Quasi-task portion</TH
><TH
ALIGN="center"
>Task-independent portion</TH
></TR
></THEAD
><TBODY
VALIGN="top"
><TR
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>NO</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15264"
>Related Service Profile Items</A
></H4
><P
>Only when all the service profile items below are set to be effective, this system call can be used.</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15267"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="38%"
TITLE="c1"><COL
WIDTH="62%"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <TT
CLASS="literal"
>TK_SUPPORT_USEC</TT
>
              </TD
><TD
>Support of microsecond</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
><P
>Additionally, the following service profile items are related to this system call.</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15277"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="38%"
TITLE="c1"><COL
WIDTH="62%"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <TT
CLASS="literal"
>TK_SUPPORT_ASM</TT
>
              </TD
><TD
>Support for specifying <TT
CLASS="literal"
>TA_ASM</TT
> for cyclic handler attribute</TD
></TR
><TR
><TD
>&#13;                <TT
CLASS="literal"
>TK_SUPPORT_DSNAME</TT
>
              </TD
><TD
>Support for specifying <TT
CLASS="literal"
>TA_DSNAME</TT
> for cyclic handler attribute</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15292"
>Description</A
></H4
><P
>This system call takes 64-bit <CODE
CLASS="varname"
>cyctim_u</CODE
> and <CODE
CLASS="varname"
>cycphs_u</CODE
> in microseconds instead of the parameters <CODE
CLASS="varname"
>cyctim</CODE
> and <CODE
CLASS="varname"
>cycphs</CODE
> of <A
HREF="time_management_functions.html#tk_cre_cyc"
>tk_cre_cyc</A
>.</P
><P
>The specification of this system call is same as that of <A
HREF="time_management_functions.html#tk_cre_cyc"
>tk_cre_cyc</A
>, except that the parameter is replaced with <CODE
CLASS="varname"
>cyctim_u</CODE
> and <CODE
CLASS="varname"
>cycphs_u</CODE
>. For more details, see the description of <A
HREF="time_management_functions.html#tk_cre_cyc"
>tk_cre_cyc</A
>.</P
></DIV
></DIV
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="tk_del_cyc"
>tk_del_cyc - Delete Cyclic Handler</A
></H3
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15307"
>C Language Interface</A
></H4
><DIV
CLASS="funcsynopsis"
><P
></P
><A
NAME="AEN15309"
></A
><PRE
CLASS="funcsynopsisinfo"
>#include &#60;tk/tkernel.h&#62;</PRE
><P
><CODE
><CODE
CLASS="FUNCDEF"
>ER ercd = tk_del_cyc</CODE
>(ID cycid);</CODE
></P
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15316"
>Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15318"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="8%"
TITLE="c1"><COL
WIDTH="17%"
TITLE="c2"><COL
WIDTH="33%"
TITLE="c3"><COL
WIDTH="42%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>ID</TD
><TD
>&#13;                <CODE
CLASS="varname"
>cycid</CODE
>
              </TD
><TD
>Cyclic Handler ID</TD
><TD
>Cyclic handler ID</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15331"
>Return Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15333"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="8%"
TITLE="c1"><COL
WIDTH="17%"
TITLE="c2"><COL
WIDTH="33%"
TITLE="c3"><COL
WIDTH="42%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>ER</TD
><TD
>&#13;                <CODE
CLASS="varname"
>ercd</CODE
>
              </TD
><TD
>Error Code</TD
><TD
>Error code</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15346"
>Error Code</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15348"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="17%"
TITLE="c1"><COL
WIDTH="83%"
TITLE="c2"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_OK</SPAN
>
              </TD
><TD
>Normal completion</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_ID</SPAN
>
              </TD
><TD
>Invalid ID number (<CODE
CLASS="varname"
>cycid</CODE
> is invalid or cannot be used)</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_NOEXS</SPAN
>
              </TD
><TD
>Object does not exist (the cyclic handler specified in <CODE
CLASS="varname"
>cycid</CODE
> does not exist)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15367"
>Valid Context</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15369"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="33%"><COL
WIDTH="33%"><COL
WIDTH="33%"><THEAD
><TR
><TH
ALIGN="center"
>Task portion</TH
><TH
ALIGN="center"
>Quasi-task portion</TH
><TH
ALIGN="center"
>Task-independent portion</TH
></TR
></THEAD
><TBODY
VALIGN="top"
><TR
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>NO</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15384"
>Related Service Profile Items</A
></H4
><P
>None.</P
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15387"
>Description</A
></H4
><P
>Deletes a cyclic handler.</P
></DIV
></DIV
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="tk_sta_cyc"
>tk_sta_cyc - Start Cyclic Handler</A
></H3
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15392"
>C Language Interface</A
></H4
><DIV
CLASS="funcsynopsis"
><P
></P
><A
NAME="AEN15394"
></A
><PRE
CLASS="funcsynopsisinfo"
>#include &#60;tk/tkernel.h&#62;</PRE
><P
><CODE
><CODE
CLASS="FUNCDEF"
>ER ercd = tk_sta_cyc</CODE
>(ID cycid);</CODE
></P
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15401"
>Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15403"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="8%"
TITLE="c1"><COL
WIDTH="17%"
TITLE="c2"><COL
WIDTH="33%"
TITLE="c3"><COL
WIDTH="42%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>ID</TD
><TD
>&#13;                <CODE
CLASS="varname"
>cycid</CODE
>
              </TD
><TD
>Cyclic Handler ID</TD
><TD
>Cyclic handler ID</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15416"
>Return Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15418"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="8%"
TITLE="c1"><COL
WIDTH="17%"
TITLE="c2"><COL
WIDTH="33%"
TITLE="c3"><COL
WIDTH="42%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>ER</TD
><TD
>&#13;                <CODE
CLASS="varname"
>ercd</CODE
>
              </TD
><TD
>Error Code</TD
><TD
>Error code</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15431"
>Error Code</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15433"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="17%"
TITLE="c1"><COL
WIDTH="83%"
TITLE="c2"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_OK</SPAN
>
              </TD
><TD
>Normal completion</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_ID</SPAN
>
              </TD
><TD
>Invalid ID number (<CODE
CLASS="varname"
>cycid</CODE
> is invalid or cannot be used)</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_NOEXS</SPAN
>
              </TD
><TD
>Object does not exist (the cyclic handler specified in <CODE
CLASS="varname"
>cycid</CODE
> does not exist)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15452"
>Valid Context</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15454"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="33%"><COL
WIDTH="33%"><COL
WIDTH="33%"><THEAD
><TR
><TH
ALIGN="center"
>Task portion</TH
><TH
ALIGN="center"
>Quasi-task portion</TH
><TH
ALIGN="center"
>Task-independent portion</TH
></TR
></THEAD
><TBODY
VALIGN="top"
><TR
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>YES</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15469"
>Related Service Profile Items</A
></H4
><P
>None.</P
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15472"
>Description</A
></H4
><P
>Activates a cyclic handler, putting it in active state.</P
><P
>If the <TT
CLASS="literal"
>TA_PHS</TT
> attribute was specified, the cycle time of the cyclic handler is not reset when the cyclic handler goes to active state. If it was already in active state when this system call was executed, it continues unchanged in active state.</P
><P
>If the <TT
CLASS="literal"
>TA_PHS</TT
> attribute was not specified, the cycle time is reset when the cyclic handler goes to active state. If it was already in active state, it continues in active state but its cycle time is reset. In this case, the next time the cyclic handler starts is after <CODE
CLASS="varname"
>cyctim</CODE
> has elapsed.</P
></DIV
></DIV
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="tk_stp_cyc"
>tk_stp_cyc - Stop Cyclic Handler</A
></H3
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15482"
>C Language Interface</A
></H4
><DIV
CLASS="funcsynopsis"
><P
></P
><A
NAME="AEN15484"
></A
><PRE
CLASS="funcsynopsisinfo"
>#include &#60;tk/tkernel.h&#62;</PRE
><P
><CODE
><CODE
CLASS="FUNCDEF"
>ER ercd = tk_stp_cyc</CODE
>(ID cycid);</CODE
></P
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15491"
>Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15493"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="8%"
TITLE="c1"><COL
WIDTH="17%"
TITLE="c2"><COL
WIDTH="33%"
TITLE="c3"><COL
WIDTH="42%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>ID</TD
><TD
>&#13;                <CODE
CLASS="varname"
>cycid</CODE
>
              </TD
><TD
>Cyclic Handler ID</TD
><TD
>Cyclic handler ID</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15506"
>Return Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15508"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="8%"
TITLE="c1"><COL
WIDTH="17%"
TITLE="c2"><COL
WIDTH="33%"
TITLE="c3"><COL
WIDTH="42%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>ER</TD
><TD
>&#13;                <CODE
CLASS="varname"
>ercd</CODE
>
              </TD
><TD
>Error Code</TD
><TD
>Error code</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15521"
>Error Code</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15523"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="17%"
TITLE="c1"><COL
WIDTH="83%"
TITLE="c2"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_OK</SPAN
>
              </TD
><TD
>Normal completion</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_ID</SPAN
>
              </TD
><TD
>Invalid ID number (<CODE
CLASS="varname"
>cycid</CODE
> is invalid or cannot be used)</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_NOEXS</SPAN
>
              </TD
><TD
>Object does not exist (the cyclic handler specified in <CODE
CLASS="varname"
>cycid</CODE
> does not exist)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15542"
>Valid Context</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15544"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="33%"><COL
WIDTH="33%"><COL
WIDTH="33%"><THEAD
><TR
><TH
ALIGN="center"
>Task portion</TH
><TH
ALIGN="center"
>Quasi-task portion</TH
><TH
ALIGN="center"
>Task-independent portion</TH
></TR
></THEAD
><TBODY
VALIGN="top"
><TR
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>YES</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15559"
>Related Service Profile Items</A
></H4
><P
>None.</P
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15562"
>Description</A
></H4
><P
>Deactivates a cyclic handler, putting it in inactive state. It the cyclic handler was already in inactive state, this system call has no effect (no operation).</P
></DIV
></DIV
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="tk_ref_cyc"
>tk_ref_cyc - Reference Cyclic Handler Status</A
></H3
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15567"
>C Language Interface</A
></H4
><DIV
CLASS="funcsynopsis"
><P
></P
><A
NAME="AEN15569"
></A
><PRE
CLASS="funcsynopsisinfo"
>#include &#60;tk/tkernel.h&#62;</PRE
><P
><CODE
><CODE
CLASS="FUNCDEF"
>ER ercd = tk_ref_cyc</CODE
>(ID cycid, T_RCYC *pk_rcyc);</CODE
></P
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15578"
>Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15580"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="8%"
TITLE="c1"><COL
WIDTH="17%"
TITLE="c2"><COL
WIDTH="33%"
TITLE="c3"><COL
WIDTH="42%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>ID</TD
><TD
>&#13;                <CODE
CLASS="varname"
>cycid</CODE
>
              </TD
><TD
>Cyclic Handler ID</TD
><TD
>Cyclic handler ID</TD
></TR
><TR
><TD
>T_RCYC*</TD
><TD
>&#13;                <CODE
CLASS="varname"
>pk_rcyc</CODE
>
              </TD
><TD
>Packet to Return Cyclic Handler Status</TD
><TD
>Pointer to the area to return the cyclic handler status</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15599"
>Return Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15601"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="8%"
TITLE="c1"><COL
WIDTH="17%"
TITLE="c2"><COL
WIDTH="33%"
TITLE="c3"><COL
WIDTH="42%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>ER</TD
><TD
>&#13;                <CODE
CLASS="varname"
>ercd</CODE
>
              </TD
><TD
>Error Code</TD
><TD
>Error code</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
><P
><CODE
CLASS="varname"
>pk_rcyc</CODE
> Detail:</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15616"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="8%"
TITLE="c1"><COL
WIDTH="17%"
TITLE="c2"><COL
WIDTH="33%"
TITLE="c3"><COL
WIDTH="42%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>void*</TD
><TD
>&#13;                <CODE
CLASS="varname"
>exinf</CODE
>
              </TD
><TD
>Extended Information</TD
><TD
>Extended information</TD
></TR
><TR
><TD
>RELTIM</TD
><TD
>&#13;                <CODE
CLASS="varname"
>lfttim</CODE
>
              </TD
><TD
>Left Time</TD
><TD
>Time remaining until the next handler starts (ms)</TD
></TR
><TR
><TD
>UINT</TD
><TD
>&#13;                <CODE
CLASS="varname"
>cycstat</CODE
>
              </TD
><TD
>Cyclic Handler Status</TD
><TD
>Cyclic handler activation state</TD
></TR
><TR
><TD
COLSPAN="4"
>(Other implementation-dependent parameters may be added beyond this point.)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15643"
>Error Code</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15645"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="17%"
TITLE="c1"><COL
WIDTH="83%"
TITLE="c2"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_OK</SPAN
>
              </TD
><TD
>Normal completion</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_ID</SPAN
>
              </TD
><TD
>Invalid ID number (<CODE
CLASS="varname"
>cycid</CODE
> is invalid or cannot be used)</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_NOEXS</SPAN
>
              </TD
><TD
>Object does not exist (the cyclic handler specified in <CODE
CLASS="varname"
>cycid</CODE
> does not exist)</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_PAR</SPAN
>
              </TD
><TD
>Parameter error (invalid <CODE
CLASS="varname"
>pk_rcyc</CODE
>)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15669"
>Valid Context</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15671"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="33%"><COL
WIDTH="33%"><COL
WIDTH="33%"><THEAD
><TR
><TH
ALIGN="center"
>Task portion</TH
><TH
ALIGN="center"
>Quasi-task portion</TH
><TH
ALIGN="center"
>Task-independent portion</TH
></TR
></THEAD
><TBODY
VALIGN="top"
><TR
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>YES</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15686"
>Related Service Profile Items</A
></H4
><P
>None.</P
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15689"
>Description</A
></H4
><P
>References the status of the cyclic handler specified in <CODE
CLASS="varname"
>cycid</CODE
>, passing in return parameters the cyclic handler activation state (<CODE
CLASS="varname"
>cycstat</CODE
>), the time remaining until the next start (<CODE
CLASS="varname"
>lfttim</CODE
>), and extended information (<CODE
CLASS="varname"
>exinf</CODE
>).</P
><P
>The following information is returned in <CODE
CLASS="varname"
>cycstat</CODE
>.</P
><PRE
CLASS="synopsis"
>&#13;cycstat := (TCYC_STP | TCYC_STA)
</PRE
><PRE
CLASS="programlisting"
>&#13;#define TCYC_STP        0x00    /* cyclic handler is inactive */
#define TCYC_STA        0x01    /* cyclic handler is active */
</PRE
><P
><CODE
CLASS="varname"
>lfttim</CODE
> returns the remaining time (milliseconds) until the next time when the cyclic handler is invoked. It does not matter whether the cyclic handler is currently running or stopped.</P
><P
><CODE
CLASS="varname"
>exinf</CODE
> returns the extended information specified as a parameter when the cyclic handler is generated.<CODE
CLASS="varname"
>exinf</CODE
> is passed to the cyclic handler as a parameter.</P
><P
>If the cyclic handler specified in <CODE
CLASS="varname"
>cycid</CODE
> does not exist for, error code <SPAN
CLASS="errorname"
>E_NOEXS</SPAN
> is returned.<A
HREF="time_management_functions.html#tk_ref_cyc"
></A
></P
><P
>The time remaining <CODE
CLASS="varname"
>lfttim</CODE
> returned in the cyclic handler status information (T_RCYC) is a value rounded to milliseconds. To know the value in microseconds, call <A
HREF="time_management_functions.html#tk_ref_cyc_u"
>tk_ref_cyc_u</A
>.</P
></DIV
></DIV
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="tk_ref_cyc_u"
>tk_ref_cyc_u - Reference Cyclic Handler Status (Microseconds)</A
></H3
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15714"
>C Language Interface</A
></H4
><DIV
CLASS="funcsynopsis"
><P
></P
><A
NAME="AEN15716"
></A
><PRE
CLASS="funcsynopsisinfo"
>#include &#60;tk/tkernel.h&#62;</PRE
><P
><CODE
><CODE
CLASS="FUNCDEF"
>ER ercd = tk_ref_cyc_u</CODE
>(ID cycid, T_RCYC_U *pk_rcyc_u);</CODE
></P
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15725"
>Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15727"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="15%"
TITLE="c1"><COL
WIDTH="15%"
TITLE="c2"><COL
WIDTH="31%"
TITLE="c3"><COL
WIDTH="38%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>ID</TD
><TD
>&#13;                <CODE
CLASS="varname"
>cycid</CODE
>
              </TD
><TD
>Cyclic Handler ID</TD
><TD
>Cyclic handler ID</TD
></TR
><TR
><TD
>T_RCYC_U*</TD
><TD
>&#13;                <CODE
CLASS="varname"
>pk_rcyc_u</CODE
>
              </TD
><TD
>Packet to Return Cyclic Handler Status</TD
><TD
>Pointer to the area to return the cyclic handler status</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15746"
>Return Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15748"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="15%"
TITLE="c1"><COL
WIDTH="15%"
TITLE="c2"><COL
WIDTH="31%"
TITLE="c3"><COL
WIDTH="38%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>ER</TD
><TD
>&#13;                <CODE
CLASS="varname"
>ercd</CODE
>
              </TD
><TD
>Error Code</TD
><TD
>Error code</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
><P
><CODE
CLASS="varname"
>pk_rcyc_u</CODE
> Detail:</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15763"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="15%"
TITLE="c1"><COL
WIDTH="15%"
TITLE="c2"><COL
WIDTH="31%"
TITLE="c3"><COL
WIDTH="38%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>void*</TD
><TD
>&#13;                <CODE
CLASS="varname"
>exinf</CODE
>
              </TD
><TD
>Extended Information</TD
><TD
>Extended information</TD
></TR
><TR
><TD
>RELTIM_U</TD
><TD
>&#13;                <CODE
CLASS="varname"
>lfttim_u</CODE
>
              </TD
><TD
>Left Time</TD
><TD
>Time remaining until the next handler starts (in microseconds)</TD
></TR
><TR
><TD
>UINT</TD
><TD
>&#13;                <CODE
CLASS="varname"
>cycstat</CODE
>
              </TD
><TD
>Cyclic Handler Status</TD
><TD
>Cyclic handler activation state</TD
></TR
><TR
><TD
COLSPAN="4"
>(Other implementation-dependent parameters may be added beyond this point.)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15790"
>Error Code</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15792"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="17%"
TITLE="c1"><COL
WIDTH="83%"
TITLE="c2"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_OK</SPAN
>
              </TD
><TD
>Normal completion</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_ID</SPAN
>
              </TD
><TD
>Invalid ID number (<CODE
CLASS="varname"
>cycid</CODE
> is invalid or cannot be used)</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_NOEXS</SPAN
>
              </TD
><TD
>Object does not exist (the cyclic handler specified in <CODE
CLASS="varname"
>cycid</CODE
> does not exist)</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_PAR</SPAN
>
              </TD
><TD
>Parameter error (invalid <CODE
CLASS="varname"
>pk_rcyc_u</CODE
>)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15816"
>Valid Context</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15818"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="33%"><COL
WIDTH="33%"><COL
WIDTH="33%"><THEAD
><TR
><TH
ALIGN="center"
>Task portion</TH
><TH
ALIGN="center"
>Quasi-task portion</TH
><TH
ALIGN="center"
>Task-independent portion</TH
></TR
></THEAD
><TBODY
VALIGN="top"
><TR
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>YES</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15833"
>Related Service Profile Items</A
></H4
><P
>Only when all the service profile items below are set to be effective, this system call can be used.</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15836"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="38%"
TITLE="c1"><COL
WIDTH="62%"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <TT
CLASS="literal"
>TK_SUPPORT_USEC</TT
>
              </TD
><TD
>Support of microsecond</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15845"
>Description</A
></H4
><P
>This system call takes 64-bit <CODE
CLASS="varname"
>lfttim_u</CODE
> in microseconds instead of the return parameter <CODE
CLASS="varname"
>lfttim</CODE
> of <A
HREF="time_management_functions.html#tk_ref_cyc"
>tk_ref_cyc</A
>.</P
><P
>The specification of this system call is same as that of <A
HREF="time_management_functions.html#tk_ref_cyc"
>tk_ref_cyc</A
>, except that the return parameter is replaced with <CODE
CLASS="varname"
>lfttim_u</CODE
>. For more details, see the description of <A
HREF="time_management_functions.html#tk_ref_cyc"
>tk_ref_cyc</A
>.</P
></DIV
></DIV
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="alarm_handler"
>Alarm Handler</A
></H2
><P
>An alarm handler is a time event handler that starts at a specified time. Functions are provided for creating and deleting an alarm handler, activating and deactivating the alarm handler, and referencing the alarm handler status. An alarm handler is an object identified by an ID number. The ID number for an alarm handler is called an alarm handler ID.</P
><P
>The time at which an alarm handler starts (called the alarm time) can be set independently for each alarm handler. When the alarm time arrives, <CODE
CLASS="varname"
>exinf</CODE
>, containing extended information about the alarm handler, is passed to it as a starting parameter.</P
><P
>After an alarm handler is created, initially it has no alarm time set and is in inactive state. The alarm time is set when the alarm handler is activated by calling <A
HREF="time_management_functions.html#tk_sta_alm"
>tk_sta_alm</A
>, as relative time from the time that system call is executed. When <A
HREF="time_management_functions.html#tk_stp_alm"
>tk_stp_alm</A
> is called deactivating the alarm handler, the alarm time setting is canceled. Likewise, when an alarm time arrives and the alarm handler runs, the alarm time is canceled and the alarm handler becomes inactive.</P
><DIV
CLASS="note"
><P
></P
><TABLE
CLASS="note"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.gif"
HSPACE="5"
ALT="Note"></TD
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
><B
>Additional Notes</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>An alarm handler is actually started at the time according to the time resolution provided by the timer interrupt interval (<TT
CLASS="literal"
>TTimPeriod</TT
>). For more details, see the additional notes for <A
HREF="time_management_functions.html#cyclic_handler"
>the Section called <I
>Cyclic Handler</I
></A
>.</P
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="tk_cre_alm"
>tk_cre_alm - Create Alarm Handler</A
></H3
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15870"
>C Language Interface</A
></H4
><DIV
CLASS="funcsynopsis"
><P
></P
><A
NAME="AEN15872"
></A
><PRE
CLASS="funcsynopsisinfo"
>#include &#60;tk/tkernel.h&#62;</PRE
><P
><CODE
><CODE
CLASS="FUNCDEF"
>ID almid = tk_cre_alm</CODE
>(CONST T_CALM *pk_calm);</CODE
></P
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15879"
>Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15881"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="21%"><COL
WIDTH="14%"><COL
WIDTH="29%"><COL
WIDTH="36%"><TBODY
VALIGN="top"
><TR
><TD
>CONST T_CALM*</TD
><TD
>&#13;                <CODE
CLASS="varname"
>pk_calm</CODE
>
              </TD
><TD
>Packet to Create Alarm Handler</TD
><TD
>Alarm handler definition information</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
><P
><CODE
CLASS="varname"
>pk_calm</CODE
> Detail:</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15896"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="21%"
TITLE="c1"><COL
WIDTH="14%"
TITLE="c2"><COL
WIDTH="29%"
TITLE="c3"><COL
WIDTH="36%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>void*</TD
><TD
>&#13;                <CODE
CLASS="varname"
>exinf</CODE
>
              </TD
><TD
>Extended Information</TD
><TD
>Extended information</TD
></TR
><TR
><TD
>ATR</TD
><TD
>&#13;                <CODE
CLASS="varname"
>almatr</CODE
>
              </TD
><TD
>Alarm Handler Attribute</TD
><TD
>Alarm handler attributes</TD
></TR
><TR
><TD
>FP</TD
><TD
>&#13;                <CODE
CLASS="varname"
>almhdr</CODE
>
              </TD
><TD
>Alarm Handler Address</TD
><TD
>Alarm handler address</TD
></TR
><TR
><TD
>UB</TD
><TD
>&#13;                <CODE
CLASS="varname"
>dsname[8]</CODE
>
              </TD
><TD
>DS Object name</TD
><TD
>DS object name</TD
></TR
><TR
><TD
COLSPAN="4"
>(Other implementation-dependent parameters may be added beyond this point.)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15929"
>Return Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15931"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="21%"
TITLE="c1"><COL
WIDTH="14%"
TITLE="c2"><COL
WIDTH="29%"
TITLE="c3"><COL
WIDTH="36%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>ID</TD
><TD
>&#13;                <CODE
CLASS="varname"
>almid</CODE
>
              </TD
><TD
>Alarm Handler ID</TD
><TD
>Alarm handler ID</TD
></TR
><TR
><TD
COLSPAN="2"
ALIGN="right"
>or</TD
><TD
>Error Code</TD
><TD
>Error code</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15948"
>Error Code</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15950"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="17%"
TITLE="c1"><COL
WIDTH="83%"
TITLE="c2"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_NOMEM</SPAN
>
              </TD
><TD
>Insufficient memory (memory for control block cannot be allocated)</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_LIMIT</SPAN
>
              </TD
><TD
>Number of alarm handlers exceeds the system limit</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_RSATR</SPAN
>
              </TD
><TD
>Reserved attribute (<CODE
CLASS="varname"
>almatr</CODE
> is invalid or cannot be used)</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_PAR</SPAN
>
              </TD
><TD
>Parameter error (<CODE
CLASS="varname"
>pk_calm</CODE
> or <CODE
CLASS="varname"
>almhdr</CODE
> is invalid or cannot be used)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15974"
>Valid Context</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15976"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="33%"><COL
WIDTH="33%"><COL
WIDTH="33%"><THEAD
><TR
><TH
ALIGN="center"
>Task portion</TH
><TH
ALIGN="center"
>Quasi-task portion</TH
><TH
ALIGN="center"
>Task-independent portion</TH
></TR
></THEAD
><TBODY
VALIGN="top"
><TR
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>NO</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN15991"
>Related Service Profile Items</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN15993"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="38%"
TITLE="c1"><COL
WIDTH="62%"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <TT
CLASS="literal"
>TK_SUPPORT_ASM</TT
>
              </TD
><TD
>Support for specifying <TT
CLASS="literal"
>TA_ASM</TT
> for alarm handler attribute</TD
></TR
><TR
><TD
>&#13;                <TT
CLASS="literal"
>TK_SUPPORT_DSNAME</TT
>
              </TD
><TD
>Support for specifying <TT
CLASS="literal"
>TA_DSNAME</TT
> for alarm handler attribute</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16008"
>Description</A
></H4
><P
>Creates an alarm handler, assigning to it an alarm handler ID. This is performed by assigning a control block for the generated alarm handler.</P
><P
>An alarm handler is a handler running at the specified time as a task-independent portion.</P
><P
><CODE
CLASS="varname"
>exinf</CODE
> can be used freely by the user to set miscellaneous information about the created alarm handler. The information set in this parameter can be referenced by <A
HREF="time_management_functions.html#tk_ref_alm"
>tk_ref_alm</A
>. If a larger area is needed for indicating user information, or if the information may need to be changed after the message buffer is created, this can be done by allocating separate memory for this purpose and putting the memory packet address in <CODE
CLASS="varname"
>exinf</CODE
>. The kernel pays no attention to the contents of <CODE
CLASS="varname"
>exinf</CODE
>.</P
><P
><CODE
CLASS="varname"
>almatr</CODE
> indicates system attributes in its lower bits and implementation-dependent attributes in its higher bits. The system attribute part of <CODE
CLASS="varname"
>almatr</CODE
> is as follows.
</P
><PRE
CLASS="synopsis"
>&#13;almatr := (TA_ASM || TA_HLNG) | [TA_DSNAME]
</PRE
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN16021"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="17%"
TITLE="c1"><COL
WIDTH="83%"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <TT
CLASS="literal"
>TA_ASM</TT
>
              </TD
><TD
>The handler is written in assembly language</TD
></TR
><TR
><TD
>&#13;                <TT
CLASS="literal"
>TA_HLNG</TT
>
              </TD
><TD
>The handler is written in high-level language</TD
></TR
><TR
><TD
>&#13;                <TT
CLASS="literal"
>TA_DSNAME</TT
>
              </TD
><TD
>Specifies DS object name</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
><PRE
CLASS="programlisting"
>&#13;#define TA_ASM          0x00000000      /* assembly language program */
#define TA_HLNG         0x00000001      /* high-level language program */
#define TA_DSNAME       0x00000040      /* DS object name */
</PRE
><P
><CODE
CLASS="varname"
>almhdr</CODE
> specifies the alarm handler start address.</P
><P
>When the <TT
CLASS="literal"
>TA_HLNG</TT
> attribute is specified, the alarm handler is started via a high-level language support routine. The high-level language support routine takes care of saving and restoring register values. The alarm handler terminates by a simple return from a function. The alarm handler takes the following format when the <TT
CLASS="literal"
>TA_HLNG</TT
> attribute is specified.</P
><PRE
CLASS="programlisting"
>&#13;void almhdr( void *exinf )
{
        /*
                (processing)
        */

        return; /* exit alarm handler */
}
</PRE
><P
>The alarm handler format when the <TT
CLASS="literal"
>TA_ASM</TT
> attribute is specified is implementation-dependent, but <CODE
CLASS="varname"
>exinf</CODE
> must be passed in a starting parameter.</P
><P
>Even if a system call is invoked from an alarm handler and this causes the task in RUNNING state up to that time to go to another state, with a different task going to RUNNING state, dispatching (task switching) does not occur while the alarm handler is running. Completion of execution by the alarm handler has precedence even if dispatching is necessary; only when the alarm handler terminates does the dispatch take place. In other words, a dispatch request that is generated while an alarm handler is running is not processed immediately, but is delayed until the alarm handler terminates. This is called delayed dispatching.</P
><P
>An alarm handler runs as a task-independent portion. As such, it is not possible to call in an alarm handler a system call that can enter WAITING state, or one that is intended for the invoking task.</P
><P
>When <TT
CLASS="literal"
>TA_DSNAME</TT
> is specified, <CODE
CLASS="varname"
>dsname</CODE
> is valid and specifies the DS object name. DS object name is used to identify objects by debugger, and it is handled only by T-Kernel/DS API, <A
HREF="utk_ds_functions.html#td_ref_dsname"
>td_ref_dsname</A
> and <A
HREF="utk_ds_functions.html#td_set_dsname"
>td_set_dsname</A
>. For more details, see the description of <A
HREF="utk_ds_functions.html#td_ref_dsname"
>td_ref_dsname</A
> and <A
HREF="utk_ds_functions.html#td_set_dsname"
>td_set_dsname</A
>. If <TT
CLASS="literal"
>TA_DSNAME</TT
> is not specified, <CODE
CLASS="varname"
>dsname</CODE
> is ignored. Then <A
HREF="utk_ds_functions.html#td_ref_dsname"
>td_ref_dsname</A
> and <A
HREF="utk_ds_functions.html#td_set_dsname"
>td_set_dsname</A
> return <SPAN
CLASS="errorname"
>E_OBJ</SPAN
> error.</P
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16062"
>Additional Notes</A
></H4
><P
>When multiple time event handlers or interrupt handlers operate at the same time, it is an implementation-dependent whether to have them run serially (after one handler exits, another starts) or in a nested manner (one handler operation is suspended, another runs, and when that one finishes the previous one resumes). In either case, since time event handlers and interrupt handlers run as task-independent portion, the principle of delayed dispatching applies.</P
></DIV
></DIV
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="tk_del_alm"
>tk_del_alm - Delete Alarm Handler</A
></H3
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16067"
>C Language Interface</A
></H4
><DIV
CLASS="funcsynopsis"
><P
></P
><A
NAME="AEN16069"
></A
><PRE
CLASS="funcsynopsisinfo"
>#include &#60;tk/tkernel.h&#62;</PRE
><P
><CODE
><CODE
CLASS="FUNCDEF"
>ER ercd = tk_del_alm</CODE
>(ID almid);</CODE
></P
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16076"
>Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN16078"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="8%"
TITLE="c1"><COL
WIDTH="17%"
TITLE="c2"><COL
WIDTH="33%"
TITLE="c3"><COL
WIDTH="42%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>ID</TD
><TD
>&#13;                <CODE
CLASS="varname"
>almid</CODE
>
              </TD
><TD
>Alarm Handler ID</TD
><TD
>Alarm handler ID</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16091"
>Return Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN16093"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="8%"
TITLE="c1"><COL
WIDTH="17%"
TITLE="c2"><COL
WIDTH="33%"
TITLE="c3"><COL
WIDTH="42%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>ER</TD
><TD
>&#13;                <CODE
CLASS="varname"
>ercd</CODE
>
              </TD
><TD
>Error Code</TD
><TD
>Error code</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16106"
>Error Code</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN16108"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="17%"
TITLE="c1"><COL
WIDTH="83%"
TITLE="c2"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_OK</SPAN
>
              </TD
><TD
>Normal completion</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_ID</SPAN
>
              </TD
><TD
>Invalid ID number (<CODE
CLASS="varname"
>almid</CODE
> is invalid or cannot be used)</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_NOEXS</SPAN
>
              </TD
><TD
>Object does not exist (the alarm handler specified in <CODE
CLASS="varname"
>almid</CODE
> does not exist)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16127"
>Valid Context</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN16129"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="33%"><COL
WIDTH="33%"><COL
WIDTH="33%"><THEAD
><TR
><TH
ALIGN="center"
>Task portion</TH
><TH
ALIGN="center"
>Quasi-task portion</TH
><TH
ALIGN="center"
>Task-independent portion</TH
></TR
></THEAD
><TBODY
VALIGN="top"
><TR
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>NO</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16144"
>Related Service Profile Items</A
></H4
><P
>None.</P
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16147"
>Description</A
></H4
><P
>Deletes an alarm handler.</P
></DIV
></DIV
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="tk_sta_alm"
>tk_sta_alm - Start Alarm Handler</A
></H3
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16152"
>C Language Interface</A
></H4
><DIV
CLASS="funcsynopsis"
><P
></P
><A
NAME="AEN16154"
></A
><PRE
CLASS="funcsynopsisinfo"
>#include &#60;tk/tkernel.h&#62;</PRE
><P
><CODE
><CODE
CLASS="FUNCDEF"
>ER ercd = tk_sta_alm</CODE
>(ID almid, RELTIM almtim);</CODE
></P
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16163"
>Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN16165"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="8%"
TITLE="c1"><COL
WIDTH="17%"
TITLE="c2"><COL
WIDTH="33%"
TITLE="c3"><COL
WIDTH="42%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>ID</TD
><TD
>&#13;                <CODE
CLASS="varname"
>almid</CODE
>
              </TD
><TD
>Alarm Handler ID</TD
><TD
>Alarm handler ID</TD
></TR
><TR
><TD
>RELTIM</TD
><TD
>&#13;                <CODE
CLASS="varname"
>almtim</CODE
>
              </TD
><TD
>Alarm Time</TD
><TD
>Alarm handler start relative time (ms)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16184"
>Return Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN16186"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="8%"
TITLE="c1"><COL
WIDTH="17%"
TITLE="c2"><COL
WIDTH="33%"
TITLE="c3"><COL
WIDTH="42%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>ER</TD
><TD
>&#13;                <CODE
CLASS="varname"
>ercd</CODE
>
              </TD
><TD
>Error Code</TD
><TD
>Error code</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16199"
>Error Code</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN16201"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="17%"
TITLE="c1"><COL
WIDTH="83%"
TITLE="c2"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_OK</SPAN
>
              </TD
><TD
>Normal completion</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_ID</SPAN
>
              </TD
><TD
>Invalid ID number (<CODE
CLASS="varname"
>almid</CODE
> is invalid or cannot be used)</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_NOEXS</SPAN
>
              </TD
><TD
>Object does not exist (the alarm handler specified in <CODE
CLASS="varname"
>almid</CODE
> does not exist)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16220"
>Valid Context</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN16222"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="33%"><COL
WIDTH="33%"><COL
WIDTH="33%"><THEAD
><TR
><TH
ALIGN="center"
>Task portion</TH
><TH
ALIGN="center"
>Quasi-task portion</TH
><TH
ALIGN="center"
>Task-independent portion</TH
></TR
></THEAD
><TBODY
VALIGN="top"
><TR
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>YES</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16237"
>Related Service Profile Items</A
></H4
><P
>None.</P
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16240"
>Description</A
></H4
><P
>Sets the alarm time of the alarm handler specified in almid to the time given in almtim, putting the alarm handler in active state. <CODE
CLASS="varname"
>almtim</CODE
> is specified as relative time from the time of calling <A
HREF="time_management_functions.html#tk_sta_alm"
>tk_sta_alm</A
>. After the time specified in <CODE
CLASS="varname"
>almtim</CODE
> has elapsed, the alarm handler starts. If the alarm handler is already active when this system call is invoked, the existing almtim setting is canceled and the alarm handler is activated anew with the alarm time specified here.</P
><P
>If <CODE
CLASS="varname"
>almtim</CODE
> = 0 is set, the alarm handler starts as soon as it is activated.</P
></DIV
></DIV
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="tk_sta_alm_u"
>tk_sta_alm_u - Start Alarm Handler (Microseconds)</A
></H3
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16250"
>C Language Interface</A
></H4
><DIV
CLASS="funcsynopsis"
><P
></P
><A
NAME="AEN16252"
></A
><PRE
CLASS="funcsynopsisinfo"
>#include &#60;tk/tkernel.h&#62;</PRE
><P
><CODE
><CODE
CLASS="FUNCDEF"
>ER ercd = tk_sta_alm_u</CODE
>(ID almid, RELTIM_U almtim_u);</CODE
></P
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16261"
>Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN16263"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="15%"
TITLE="c1"><COL
WIDTH="15%"
TITLE="c2"><COL
WIDTH="31%"
TITLE="c3"><COL
WIDTH="38%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>ID</TD
><TD
>&#13;                <CODE
CLASS="varname"
>almid</CODE
>
              </TD
><TD
>Alarm Handler ID</TD
><TD
>Alarm handler ID</TD
></TR
><TR
><TD
>RELTIM_U</TD
><TD
>&#13;                <CODE
CLASS="varname"
>almtim_u</CODE
>
              </TD
><TD
>Alarm Time</TD
><TD
>Alarm handler start relative time (in microseconds)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16282"
>Return Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN16284"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="15%"
TITLE="c1"><COL
WIDTH="15%"
TITLE="c2"><COL
WIDTH="31%"
TITLE="c3"><COL
WIDTH="38%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>ER</TD
><TD
>&#13;                <CODE
CLASS="varname"
>ercd</CODE
>
              </TD
><TD
>Error Code</TD
><TD
>Error code</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16297"
>Error Code</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN16299"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="17%"
TITLE="c1"><COL
WIDTH="83%"
TITLE="c2"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_OK</SPAN
>
              </TD
><TD
>Normal completion</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_ID</SPAN
>
              </TD
><TD
>Invalid ID number (<CODE
CLASS="varname"
>almid</CODE
> is invalid or cannot be used)</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_NOEXS</SPAN
>
              </TD
><TD
>Object does not exist (the alarm handler specified in <CODE
CLASS="varname"
>almid</CODE
> does not exist)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16318"
>Valid Context</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN16320"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="33%"><COL
WIDTH="33%"><COL
WIDTH="33%"><THEAD
><TR
><TH
ALIGN="center"
>Task portion</TH
><TH
ALIGN="center"
>Quasi-task portion</TH
><TH
ALIGN="center"
>Task-independent portion</TH
></TR
></THEAD
><TBODY
VALIGN="top"
><TR
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>YES</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16335"
>Related Service Profile Items</A
></H4
><P
>Only when all the service profile items below are set to be effective, this system call can be used.</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN16338"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="38%"
TITLE="c1"><COL
WIDTH="62%"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <TT
CLASS="literal"
>TK_SUPPORT_USEC</TT
>
              </TD
><TD
>Support of microsecond</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16347"
>Description</A
></H4
><P
>This system call takes 64-bit <CODE
CLASS="varname"
>almtim_u</CODE
> in microseconds instead of the parameter <CODE
CLASS="varname"
>almtim</CODE
> of <A
HREF="time_management_functions.html#tk_sta_alm"
>tk_sta_alm</A
>.</P
><P
>The specification of this system call is same as that of <A
HREF="time_management_functions.html#tk_sta_alm"
>tk_sta_alm</A
>, except that the parameter is replaced with <CODE
CLASS="varname"
>almtim_u</CODE
>. For more details, see the description of <A
HREF="time_management_functions.html#tk_sta_alm"
>tk_sta_alm</A
>.</P
></DIV
></DIV
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="tk_stp_alm"
>tk_stp_alm - Stop Alarm Handler</A
></H3
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16359"
>C Language Interface</A
></H4
><DIV
CLASS="funcsynopsis"
><P
></P
><A
NAME="AEN16361"
></A
><PRE
CLASS="funcsynopsisinfo"
>#include &#60;tk/tkernel.h&#62;</PRE
><P
><CODE
><CODE
CLASS="FUNCDEF"
>ER ercd = tk_stp_alm</CODE
>(ID almid);</CODE
></P
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16368"
>Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN16370"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="8%"
TITLE="c1"><COL
WIDTH="17%"
TITLE="c2"><COL
WIDTH="33%"
TITLE="c3"><COL
WIDTH="42%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>ID</TD
><TD
>&#13;                <CODE
CLASS="varname"
>almid</CODE
>
              </TD
><TD
>Alarm Handler ID</TD
><TD
>Alarm handler ID</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16383"
>Return Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN16385"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="8%"
TITLE="c1"><COL
WIDTH="17%"
TITLE="c2"><COL
WIDTH="33%"
TITLE="c3"><COL
WIDTH="42%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>ER</TD
><TD
>&#13;                <CODE
CLASS="varname"
>ercd</CODE
>
              </TD
><TD
>Error Code</TD
><TD
>Error code</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16398"
>Error Code</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN16400"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="17%"
TITLE="c1"><COL
WIDTH="83%"
TITLE="c2"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_OK</SPAN
>
              </TD
><TD
>Normal completion</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_ID</SPAN
>
              </TD
><TD
>Invalid ID number (<CODE
CLASS="varname"
>almid</CODE
> is invalid or cannot be used)</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_NOEXS</SPAN
>
              </TD
><TD
>Object does not exist (the alarm handler specified in <CODE
CLASS="varname"
>almid</CODE
> does not exist)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16419"
>Valid Context</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN16421"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="33%"><COL
WIDTH="33%"><COL
WIDTH="33%"><THEAD
><TR
><TH
ALIGN="center"
>Task portion</TH
><TH
ALIGN="center"
>Quasi-task portion</TH
><TH
ALIGN="center"
>Task-independent portion</TH
></TR
></THEAD
><TBODY
VALIGN="top"
><TR
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>YES</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16436"
>Related Service Profile Items</A
></H4
><P
>None.</P
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16439"
>Description</A
></H4
><P
>Cancels the alarm time of the alarm handler specified in almid, putting it in inactive state. It the cyclic handler was already in inactive state, this system call has no effect (no operation).</P
></DIV
></DIV
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="tk_ref_alm"
>tk_ref_alm - Reference Alarm Handler Status</A
></H3
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16444"
>C Language Interface</A
></H4
><DIV
CLASS="funcsynopsis"
><P
></P
><A
NAME="AEN16446"
></A
><PRE
CLASS="funcsynopsisinfo"
>#include &#60;tk/tkernel.h&#62;</PRE
><P
><CODE
><CODE
CLASS="FUNCDEF"
>ER ercd = tk_ref_alm</CODE
>(ID almid, T_RALM *pk_ralm);</CODE
></P
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16455"
>Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN16457"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="8%"
TITLE="c1"><COL
WIDTH="17%"
TITLE="c2"><COL
WIDTH="33%"
TITLE="c3"><COL
WIDTH="42%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>ID</TD
><TD
>&#13;                <CODE
CLASS="varname"
>almid</CODE
>
              </TD
><TD
>Alarm Handler ID</TD
><TD
>Alarm handler ID</TD
></TR
><TR
><TD
>T_RALM*</TD
><TD
>&#13;                <CODE
CLASS="varname"
>pk_ralm</CODE
>
              </TD
><TD
>Packet to Return Alarm Handler Status</TD
><TD
>Pointer to the area to return the alarm handler status</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16476"
>Return Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN16478"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="8%"><COL
WIDTH="17%"><COL
WIDTH="33%"><COL
WIDTH="42%"><TBODY
VALIGN="top"
><TR
><TD
>ER</TD
><TD
>&#13;                <CODE
CLASS="varname"
>ercd</CODE
>
              </TD
><TD
>Error Code</TD
><TD
>Error code</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
><P
><CODE
CLASS="varname"
>pk_ralm</CODE
> Detail:</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN16493"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="8%"
TITLE="c1"><COL
WIDTH="17%"
TITLE="c2"><COL
WIDTH="33%"
TITLE="c3"><COL
WIDTH="42%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>void*</TD
><TD
>&#13;                <CODE
CLASS="varname"
>exinf</CODE
>
              </TD
><TD
>Extended Information</TD
><TD
>Extended information</TD
></TR
><TR
><TD
>RELTIM</TD
><TD
>&#13;                <CODE
CLASS="varname"
>lfttim</CODE
>
              </TD
><TD
>Left Time</TD
><TD
>Time remaining until the handler starts (ms)</TD
></TR
><TR
><TD
>UINT</TD
><TD
>&#13;                <CODE
CLASS="varname"
>almstat</CODE
>
              </TD
><TD
>Alarm Handler Status</TD
><TD
>Alarm handler activation state</TD
></TR
><TR
><TD
COLSPAN="4"
>(Other implementation-dependent parameters may be added beyond this point.)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16520"
>Error Code</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN16522"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="17%"
TITLE="c1"><COL
WIDTH="83%"
TITLE="c2"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_OK</SPAN
>
              </TD
><TD
>Normal completion</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_ID</SPAN
>
              </TD
><TD
>Invalid ID number (<CODE
CLASS="varname"
>almid</CODE
> is invalid or cannot be used)</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_NOEXS</SPAN
>
              </TD
><TD
>Object does not exist (the alarm handler specified in <CODE
CLASS="varname"
>almid</CODE
> does not exist)</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_PAR</SPAN
>
              </TD
><TD
>Parameter error (invalid <CODE
CLASS="varname"
>pk_ralm</CODE
>)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16546"
>Valid Context</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN16548"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="33%"><COL
WIDTH="33%"><COL
WIDTH="33%"><THEAD
><TR
><TH
ALIGN="center"
>Task portion</TH
><TH
ALIGN="center"
>Quasi-task portion</TH
><TH
ALIGN="center"
>Task-independent portion</TH
></TR
></THEAD
><TBODY
VALIGN="top"
><TR
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>YES</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16563"
>Related Service Profile Items</A
></H4
><P
>None.</P
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16566"
>Description</A
></H4
><P
>References the status of the alarm handler specified in <CODE
CLASS="varname"
>almid</CODE
>, passing in return parameters the time remaining until the handler starts (<CODE
CLASS="varname"
>lfttim</CODE
>), and extended information (<CODE
CLASS="varname"
>exinf</CODE
>).</P
><P
>The following information is returned in <CODE
CLASS="varname"
>almstat</CODE
>.</P
><PRE
CLASS="synopsis"
>&#13;almstat:= (TALM_STP | TALM_STA)
</PRE
><PRE
CLASS="programlisting"
>&#13;#define TALM_STP        0x00    0x00 /* alarm handler is inactive */
#define TALM_STA        0x01    0x01 /* alarm handler is active */
</PRE
><P
>If the alarm handler is active (<TT
CLASS="literal"
>TALM_STA</TT
>), the relative time until the alarm handler is scheduled to be started next time is returned to <CODE
CLASS="varname"
>lfttim</CODE
>. This value is within the range <CODE
CLASS="varname"
>almtim</CODE
> ≧ <CODE
CLASS="varname"
>lfttim</CODE
> ≧ 0 specified with <A
HREF="time_management_functions.html#tk_sta_alm"
>tk_sta_alm</A
>. Since <CODE
CLASS="varname"
>lfttim</CODE
> is decremented with each timer interrupt, <CODE
CLASS="varname"
>lfttim</CODE
> = 0 means the alarm handler will start at the next timer interrupt.</P
><P
><CODE
CLASS="varname"
>exinf</CODE
> returns the extended information specified as a parameter when the alarm handler is generated. <CODE
CLASS="varname"
>exinf</CODE
> is passed to the alarm handler as a parameter.</P
><P
>If the alarm handler is inactive (<TT
CLASS="literal"
>TALM_STP</TT
>), <CODE
CLASS="varname"
>lfttim</CODE
> is indeterminate.</P
><P
>If the alarm handler specified with <A
HREF="time_management_functions.html#tk_ref_alm"
>tk_ref_alm</A
> in <CODE
CLASS="varname"
>almid</CODE
> does not exist, error code <SPAN
CLASS="errorname"
>E_NOEXS</SPAN
> is returned.</P
><P
>The time remaining <CODE
CLASS="varname"
>lfttim</CODE
> returned in the alarm handler status information (T_RALM) is a value rounded to milliseconds. To know the value in microseconds, call <A
HREF="time_management_functions.html#tk_ref_alm_u"
>tk_ref_alm_u</A
>.</P
></DIV
></DIV
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="tk_ref_alm_u"
>tk_ref_alm_u - Reference Alarm Handler Status (Microseconds)</A
></H3
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16599"
>C Language Interface</A
></H4
><DIV
CLASS="funcsynopsis"
><P
></P
><A
NAME="AEN16601"
></A
><PRE
CLASS="funcsynopsisinfo"
>#include &#60;tk/tkernel.h&#62;</PRE
><P
><CODE
><CODE
CLASS="FUNCDEF"
>ER ercd = tk_ref_alm_u</CODE
>(ID almid, T_RALM_U *pk_ralm_u);</CODE
></P
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16610"
>Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN16612"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="15%"
TITLE="c1"><COL
WIDTH="15%"
TITLE="c2"><COL
WIDTH="31%"
TITLE="c3"><COL
WIDTH="38%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>ID</TD
><TD
>&#13;                <CODE
CLASS="varname"
>almid</CODE
>
              </TD
><TD
>Alarm Handler ID</TD
><TD
>Alarm handler ID</TD
></TR
><TR
><TD
>T_RALM_U*</TD
><TD
>&#13;                <CODE
CLASS="varname"
>pk_ralm_u</CODE
>
              </TD
><TD
>Packet to Return Alarm Handler Status</TD
><TD
>Pointer to the area to return the alarm handler status</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16631"
>Return Parameter</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN16633"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="15%"><COL
WIDTH="15%"><COL
WIDTH="31%"><COL
WIDTH="38%"><TBODY
VALIGN="top"
><TR
><TD
>ER</TD
><TD
>&#13;                <CODE
CLASS="varname"
>ercd</CODE
>
              </TD
><TD
>Error Code</TD
><TD
>Error code</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
><P
><CODE
CLASS="varname"
>pk_ralm_u</CODE
> Detail:</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN16648"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="15%"
TITLE="c1"><COL
WIDTH="15%"
TITLE="c2"><COL
WIDTH="31%"
TITLE="c3"><COL
WIDTH="38%"
TITLE="c4"><TBODY
VALIGN="top"
><TR
><TD
>void*</TD
><TD
>&#13;                <CODE
CLASS="varname"
>exinf</CODE
>
              </TD
><TD
>Extended Information</TD
><TD
>Extended information</TD
></TR
><TR
><TD
>RELTIM_U</TD
><TD
>&#13;                <CODE
CLASS="varname"
>lfttim_u</CODE
>
              </TD
><TD
>Left Time</TD
><TD
>Time remaining until the handler starts (in microseconds)</TD
></TR
><TR
><TD
>UINT</TD
><TD
>&#13;                <CODE
CLASS="varname"
>almstat</CODE
>
              </TD
><TD
>Alarm Handler Status</TD
><TD
>Alarm handler activation state</TD
></TR
><TR
><TD
COLSPAN="4"
>(Other implementation-dependent parameters may be added beyond this point.)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16675"
>Error Code</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN16677"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="17%"
TITLE="c1"><COL
WIDTH="83%"
TITLE="c2"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_OK</SPAN
>
              </TD
><TD
>Normal completion</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_ID</SPAN
>
              </TD
><TD
>Invalid ID number (<CODE
CLASS="varname"
>almid</CODE
> is invalid or cannot be used)</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_NOEXS</SPAN
>
              </TD
><TD
>Object does not exist (the alarm handler specified in <CODE
CLASS="varname"
>almid</CODE
> does not exist)</TD
></TR
><TR
><TD
>&#13;                <SPAN
CLASS="errorname"
>E_PAR</SPAN
>
              </TD
><TD
>Parameter error (invalid <CODE
CLASS="varname"
>pk_ralm_u</CODE
>)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16701"
>Valid Context</A
></H4
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN16703"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="33%"><COL
WIDTH="33%"><COL
WIDTH="33%"><THEAD
><TR
><TH
ALIGN="center"
>Task portion</TH
><TH
ALIGN="center"
>Quasi-task portion</TH
><TH
ALIGN="center"
>Task-independent portion</TH
></TR
></THEAD
><TBODY
VALIGN="top"
><TR
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>YES</TD
><TD
ALIGN="center"
>YES</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16718"
>Related Service Profile Items</A
></H4
><P
>Only when all the service profile items below are set to be effective, this system call can be used.</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="AEN16721"
></A
><TABLE
BORDER="0"
FRAME="void"
RULES="none"
WIDTH="100%"
CLASS="CALSTABLE"
><COL
WIDTH="38%"
TITLE="c1"><COL
WIDTH="62%"><TBODY
VALIGN="top"
><TR
><TD
>&#13;                <TT
CLASS="literal"
>TK_SUPPORT_USEC</TT
>
              </TD
><TD
>Support of microsecond</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="AEN16730"
>Description</A
></H4
><P
>This system call takes 64-bit <CODE
CLASS="varname"
>lfttim_u</CODE
> in microseconds instead of the return parameter <CODE
CLASS="varname"
>lfttim</CODE
> of <A
HREF="time_management_functions.html#tk_ref_alm"
>tk_ref_alm</A
>.</P
><P
>The specification of this system call is same as that of <A
HREF="time_management_functions.html#tk_ref_alm"
>tk_ref_alm</A
>, except that the return parameter is replaced with <CODE
CLASS="varname"
>lfttim_u</CODE
>. For more details, see the description of <A
HREF="time_management_functions.html#tk_ref_alm"
>tk_ref_alm</A
>.</P
></DIV
></DIV
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="memory_pool_management_functions.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="interrupt_management_functions_os.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Memory Pool Management Functions</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="utk_os_functions.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Interrupt Management Functions</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>